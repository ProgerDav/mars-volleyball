!function (t, e) { "function" == typeof define && define.amd ? define("p5", [], function () { return t.returnExportsGlobal = e() }) : "object" == typeof exports ? module.exports = e() : t.p5 = e() }(this, function () { var amdclean = {}, PI, p5, context, definition; return amdclean.shim = void (window.requestDraw = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (t, e) { window.setTimeout(t, 1e3 / 60) }), amdclean.constants = (PI = Math.PI, { ARROW: "default", CROSS: "crosshair", HAND: "pointer", MOVE: "move", TEXT: "text", WAIT: "wait", HALF_PI: PI / 2, PI: PI, QUARTER_PI: PI / 4, TAU: 2 * PI, TWO_PI: 2 * PI, DEGREES: "degrees", RADIANS: "radians", CORNER: "corner", CORNERS: "corners", RADIUS: "radius", RIGHT: "right", LEFT: "left", CENTER: "center", TOP: "top", BOTTOM: "bottom", BASELINE: "alphabetic", POINTS: "points", LINES: "lines", TRIANGLES: "triangles", TRIANGLE_FAN: "triangles_fan", TRIANGLE_STRIP: "triangles_strip", QUADS: "quads", QUAD_STRIP: "quad_strip", CLOSE: "close", OPEN: "open", CHORD: "chord", PIE: "pie", PROJECT: "square", SQUARE: "butt", ROUND: "round", BEVEL: "bevel", MITER: "miter", RGB: "rgb", HSB: "hsb", AUTO: "auto", ALT: 18, BACKSPACE: 8, CONTROL: 17, DELETE: 46, DOWN_ARROW: 40, ENTER: 13, ESCAPE: 27, LEFT_ARROW: 37, OPTION: 18, RETURN: 13, RIGHT_ARROW: 39, SHIFT: 16, TAB: 9, UP_ARROW: 38, BLEND: "normal", ADD: "lighter", DARKEST: "darken", LIGHTEST: "lighten", DIFFERENCE: "difference", EXCLUSION: "exclusion", MULTIPLY: "multiply", SCREEN: "screen", REPLACE: "source-over", OVERLAY: "overlay", HARD_LIGHT: "hard-light", SOFT_LIGHT: "soft-light", DODGE: "color-dodge", BURN: "color-burn", THRESHOLD: "threshold", GRAY: "gray", OPAQUE: "opaque", INVERT: "invert", POSTERIZE: "posterize", DILATE: "dilate", ERODE: "erode", BLUR: "blur", NORMAL: "normal", ITALIC: "italic", BOLD: "bold", LINEAR: "linear", QUADRATIC: "quadratic", BEZIER: "bezier", CURVE: "curve" }), amdclean.core = function (t, e, o) { "use strict"; o = o; var r = function (t, e, n) { for (var i in 2 === arguments.length && "boolean" == typeof e && (n = e, e = void 0), this._setupDone = !1, this._pixelDensity = window.devicePixelRatio || 1, this._startTime = (new Date).getTime(), this._userNode = e, this._curElement = null, this._elements = [], this._preloadCount = 0, this._updateInterval = 0, this._isGlobal = !1, this._loop = !0, this._styles = [], this._defaultCanvasSize = { width: 100, height: 100 }, this._events = { mousemove: null, mousedown: null, mouseup: null, click: null, mouseover: null, mouseout: null, keydown: null, keyup: null, keypress: null, touchstart: null, touchmove: null, touchend: null, resize: null, blur: null }, window.DeviceOrientationEvent ? this._events.deviceorientation = null : window.DeviceMotionEvent ? this._events.devicemotion = null : this._events.MozOrientation = null, /Firefox/i.test(navigator.userAgent) ? this._events.DOMMouseScroll = null : this._events.mousewheel = null, this._loadingScreenId = "p5_loading", this._start = function () { (this._userNode && "string" == typeof this._userNode && (this._userNode = document.getElementById(this._userNode)), this._loadingScreen = document.getElementById(this._loadingScreenId), this._loadingScreen) || (this._loadingScreen = document.createElement("loadingDiv"), this._loadingScreen.innerHTML = "loading...", this._loadingScreen.style.position = "absolute", (this._userNode || document.body).appendChild(this._loadingScreen)); this.createCanvas(this._defaultCanvasSize.width, this._defaultCanvasSize.height, !0); var t = this.preload || window.preload, e = this._isGlobal ? window : this; t ? (this._preloadMethods.forEach(function (t) { e[t] = function () { var o = Array.prototype.slice.call(arguments); return e._preload(t, o) } }), t(), 0 === this._preloadCount && (this._setup(), this._runFrames(), this._draw())) : (this._setup(), this._runFrames(), this._draw()) }.bind(this), this._preload = function (t, e) { var o = this._isGlobal ? window : this; o._setProperty("_preloadCount", o._preloadCount + 1); return e.push(function (t) { o._setProperty("_preloadCount", o._preloadCount - 1), 0 === o._preloadCount && (o._setup(), o._runFrames(), o._draw()) }), r.prototype[t].apply(o, e) }.bind(this), this._setup = function () { var t = this._isGlobal ? window : this; "function" == typeof t.preload && this._preloadMethods.forEach(function (e) { t[e] = r.prototype[e] }), "function" == typeof t.setup && t.setup(), this.canvas.style.visibility = "", this.canvas.className = this.canvas.className.replace("p5_hidden", ""), this._setupDone = !0, this._loadingScreen.parentNode.removeChild(this._loadingScreen) }.bind(this), this._draw = function () { var t = (new Date).getTime(); this._frameRate = 1e3 / (t - this._lastFrameTime), this._lastFrameTime = t, this._setProperty("frameCount", this.frameCount + 1), this._loop && (this._drawInterval && clearInterval(this._drawInterval), this._drawInterval = setTimeout(function () { window.requestDraw(this._draw.bind(this)) }.bind(this), 1e3 / this._targetFrameRate)), this.redraw(), this._updatePAccelerations(), this._updatePMouseCoords(), this._updatePTouchCoords() }.bind(this), this._runFrames = function () { this._updateInterval && clearInterval(this._updateInterval) }.bind(this), this._setProperty = function (t, e) { this[t] = e, this._isGlobal && (window[t] = e) }.bind(this), this.remove = function () { if (this._curElement) { for (var t in this._loop = !1, this._drawInterval && clearTimeout(this._drawInterval), this._updateInterval && clearTimeout(this._updateInterval), this._events) window.removeEventListener(t, this._events[t]); for (var e = 0; e < this._elements.length; e++) { var o = this._elements[e]; for (var n in o.elt.parentNode && o.elt.parentNode.removeChild(o.elt), o._events) o.elt.removeEventListener(n, o._events[n]) } var i = this; if (this._registeredMethods.remove.forEach(function (t) { void 0 !== t && t.call(i) }), this._isGlobal) { for (var s in r.prototype) try { delete window[s] } catch (t) { window[s] = void 0 } for (var a in this) if (this.hasOwnProperty(a)) try { delete window[a] } catch (t) { window[a] = void 0 } } } }.bind(this), o) r.prototype[i] = o[i]; if (t) t(this); else { for (var s in this._isGlobal = !0, r.prototype) if ("function" == typeof r.prototype[s]) { var a = s.substring(2); this._events.hasOwnProperty(a) || (window[s] = r.prototype[s].bind(this)) } else window[s] = r.prototype[s]; for (var l in this) this.hasOwnProperty(l) && (window[l] = this[l]) } for (var p in this._events) { var h = this["_on" + p]; if (h) { var c = h.bind(this); window.addEventListener(p, c), this._events[p] = c } } var u = this; window.addEventListener("focus", function () { u._setProperty("focused", !0) }), window.addEventListener("blur", function () { u._setProperty("focused", !1) }), n ? this._start() : "complete" === document.readyState ? this._start() : window.addEventListener("load", this._start.bind(this), !1) }; return r.prototype._preloadMethods = ["loadJSON", "loadImage", "loadStrings", "loadXML", "loadShape", "loadTable"], r.prototype._registeredMethods = { pre: [], post: [], remove: [] }, r.prototype.registerPreloadMethod = function (t) { r.prototype._preloadMethods.push(t) }.bind(this), r.prototype.registerMethod = function (t, e) { r.prototype._registeredMethods.hasOwnProperty(t) || (r.prototype._registeredMethods[t] = []), r.prototype._registeredMethods[t].push(e) }.bind(this), r }(0, amdclean.shim, amdclean.constants), amdclean.utilscolor_utils = (p5 = amdclean.core, p5.ColorUtils = {}, p5.ColorUtils.hsbaToRGBA = function (t) { var e = t[0], o = t[1], r = t[2]; e /= 255, r /= 255; var n = []; if (0 == (o /= 255)) n = [Math.round(255 * r), Math.round(255 * r), Math.round(255 * r), t[3]]; else { var i = 6 * e; 6 === i && (i = 0); var s, a, l, p = Math.floor(i), h = r * (1 - o), c = r * (1 - o * (i - p)), u = r * (1 - o * (1 - (i - p))); 0 === p ? (s = r, a = u, l = h) : 1 === p ? (s = c, a = r, l = h) : 2 === p ? (s = h, a = r, l = u) : 3 === p ? (s = h, a = c, l = r) : 4 === p ? (s = u, a = h, l = r) : (s = r, a = h, l = c), n = [Math.round(255 * s), Math.round(255 * a), Math.round(255 * l), t[3]] } return n }, p5.ColorUtils.rgbaToHSBA = function (t) { var e, o, r = t[0] / 255, n = t[1] / 255, i = t[2] / 255, s = Math.min(r, n, i), a = Math.max(r, n, i), l = a - s, p = a; if (0 === l) e = 0, o = 0; else { o = l / a; var h = ((a - r) / 6 + l / 2) / l, c = ((a - n) / 6 + l / 2) / l, u = ((a - i) / 6 + l / 2) / l; r === a ? e = u - c : n === a ? e = 1 / 3 + h - u : i === a && (e = 2 / 3 + c - h), e < 0 && (e += 1), e > 1 && (e -= 1) } return [Math.round(255 * e), Math.round(255 * o), Math.round(255 * p), t[3]] }, p5.ColorUtils), amdclean.p5Color = function (t, e, o, r) { var n = e, i = o; r = r; n.Color = function (t, e) { return this.color_array = n.Color._getFormattedColor.apply(t, e), this._normalizeColorArray(t), t._colorMode === r.HSB ? (this.hsba = this.color_array, this.rgba = i.hsbaToRGBA(this.hsba)) : (this.rgba = this.color_array, this.hsba = i.rgbaToHSBA(this.rgba)), this }, n.Color.prototype._normalizeColorArray = function (t) { var e = t._colorMode === r.RGB ? t._maxRGB : t._maxHSB, o = this.color_array; return o[0] *= 255 / e[0], o[1] *= 255 / e[1], o[2] *= 255 / e[2], o[3] *= 255 / e[3], o }, n.Color.prototype.getHue = function () { return this.hsba[0] }, n.Color.prototype.getSaturation = function () { return this.hsba[1] }, n.Color.prototype.getBrightness = function () { return this.hsba[2] }, n.Color.prototype.getRed = function () { return this.rgba[0] }, n.Color.prototype.getGreen = function () { return this.rgba[1] }, n.Color.prototype.getBlue = function () { return this.rgba[2] }, n.Color.prototype.getAlpha = function () { return this.rgba[3] }, n.Color.prototype.toString = function () { for (var t = this.rgba, e = 0; e < 3; e++)t[e] = Math.floor(t[e]); var o = void 0 !== t[3] ? t[3] / 255 : 1; return "rgba(" + t[0] + "," + t[1] + "," + t[2] + "," + o + ")" }; var s = /\s*/, a = /(\d{1,3})/, l = /((?:\d+(?:\.\d+)?)|(?:\.\d+))/, p = new RegExp(l.source + "%"), h = { aliceblue: "#f0f8ff", antiquewhite: "#faebd7", aqua: "#00ffff", aquamarine: "#7fffd4", azure: "#f0ffff", beige: "#f5f5dc", bisque: "#ffe4c4", black: "#000000", blanchedalmond: "#ffebcd", blue: "#0000ff", blueviolet: "#8a2be2", brown: "#a52a2a", burlywood: "#deb887", cadetblue: "#5f9ea0", chartreuse: "#7fff00", chocolate: "#d2691e", coral: "#ff7f50", cornflowerblue: "#6495ed", cornsilk: "#fff8dc", crimson: "#dc143c", cyan: "#00ffff", darkblue: "#00008b", darkcyan: "#008b8b", darkgoldenrod: "#b8860b", darkgray: "#a9a9a9", darkgreen: "#006400", darkgrey: "#a9a9a9", darkkhaki: "#bdb76b", darkmagenta: "#8b008b", darkolivegreen: "#556b2f", darkorange: "#ff8c00", darkorchid: "#9932cc", darkred: "#8b0000", darksalmon: "#e9967a", darkseagreen: "#8fbc8f", darkslateblue: "#483d8b", darkslategray: "#2f4f4f", darkslategrey: "#2f4f4f", darkturquoise: "#00ced1", darkviolet: "#9400d3", deeppink: "#ff1493", deepskyblue: "#00bfff", dimgray: "#696969", dimgrey: "#696969", dodgerblue: "#1e90ff", firebrick: "#b22222", floralwhite: "#fffaf0", forestgreen: "#228b22", fuchsia: "#ff00ff", gainsboro: "#dcdcdc", ghostwhite: "#f8f8ff", gold: "#ffd700", goldenrod: "#daa520", gray: "#808080", green: "#008000", greenyellow: "#adff2f", grey: "#808080", honeydew: "#f0fff0", hotpink: "#ff69b4", indianred: "#cd5c5c", indigo: "#4b0082", ivory: "#fffff0", khaki: "#f0e68c", lavender: "#e6e6fa", lavenderblush: "#fff0f5", lawngreen: "#7cfc00", lemonchiffon: "#fffacd", lightblue: "#add8e6", lightcoral: "#f08080", lightcyan: "#e0ffff", lightgoldenrodyellow: "#fafad2", lightgray: "#d3d3d3", lightgreen: "#90ee90", lightgrey: "#d3d3d3", lightpink: "#ffb6c1", lightsalmon: "#ffa07a", lightseagreen: "#20b2aa", lightskyblue: "#87cefa", lightslategray: "#778899", lightslategrey: "#778899", lightsteelblue: "#b0c4de", lightyellow: "#ffffe0", lime: "#00ff00", limegreen: "#32cd32", linen: "#faf0e6", magenta: "#ff00ff", maroon: "#800000", mediumaquamarine: "#66cdaa", mediumblue: "#0000cd", mediumorchid: "#ba55d3", mediumpurple: "#9370db", mediumseagreen: "#3cb371", mediumslateblue: "#7b68ee", mediumspringgreen: "#00fa9a", mediumturquoise: "#48d1cc", mediumvioletred: "#c71585", midnightblue: "#191970", mintcream: "#f5fffa", mistyrose: "#ffe4e1", moccasin: "#ffe4b5", navajowhite: "#ffdead", navy: "#000080", oldlace: "#fdf5e6", olive: "#808000", olivedrab: "#6b8e23", orange: "#ffa500", orangered: "#ff4500", orchid: "#da70d6", palegoldenrod: "#eee8aa", palegreen: "#98fb98", paleturquoise: "#afeeee", palevioletred: "#db7093", papayawhip: "#ffefd5", peachpuff: "#ffdab9", peru: "#cd853f", pink: "#ffc0cb", plum: "#dda0dd", powderblue: "#b0e0e6", purple: "#800080", red: "#ff0000", rosybrown: "#bc8f8f", royalblue: "#4169e1", saddlebrown: "#8b4513", salmon: "#fa8072", sandybrown: "#f4a460", seagreen: "#2e8b57", seashell: "#fff5ee", sienna: "#a0522d", silver: "#c0c0c0", skyblue: "#87ceeb", slateblue: "#6a5acd", slategray: "#708090", slategrey: "#708090", snow: "#fffafa", springgreen: "#00ff7f", steelblue: "#4682b4", tan: "#d2b48c", teal: "#008080", thistle: "#d8bfd8", tomato: "#ff6347", turquoise: "#40e0d0", violet: "#ee82ee", wheat: "#f5deb3", white: "#ffffff", whitesmoke: "#f5f5f5", yellow: "#ffff00", yellowgreen: "#9acd32" }, c = { HEX3: /^#([a-f0-9])([a-f0-9])([a-f0-9])$/i, HEX6: /^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i, RGB: new RegExp(["^rgb\\(", a.source, ",", a.source, ",", a.source, "\\)$"].join(s.source), "i"), RGB_PERCENT: new RegExp(["^rgb\\(", p.source, ",", p.source, ",", p.source, "\\)$"].join(s.source), "i"), RGBA: new RegExp(["^rgba\\(", a.source, ",", a.source, ",", a.source, ",", l.source, "\\)$"].join(s.source), "i"), RGBA_PERCENT: new RegExp(["^rgba\\(", p.source, ",", p.source, ",", p.source, ",", l.source, "\\)$"].join(s.source), "i") }; return n.Color._getFormattedColor = function () { var t, e, o, i, s, a; if (arguments.length >= 3) t = arguments[0], e = arguments[1], o = arguments[2], i = "number" == typeof arguments[3] ? arguments[3] : 255; else { if ("string" == typeof arguments[0]) return s = arguments[0].trim().toLowerCase(), h[s] ? n.Color._getFormattedColor.apply(this, [h[s]]) : (a = c.HEX3.test(s) ? c.HEX3.exec(s).slice(1).map(function (t) { return parseInt(t + t, 16) }) : c.HEX6.test(s) ? c.HEX6.exec(s).slice(1).map(function (t) { return parseInt(t, 16) }) : c.RGB.test(s) ? c.RGB.exec(s).slice(1).map(function (t) { return parseInt(t, 10) }) : c.RGB_PERCENT.test(s) ? c.RGB_PERCENT.exec(s).slice(1).map(function (t) { return parseInt(parseFloat(t) / 100 * 255, 10) }) : c.RGBA.test(s) ? c.RGBA.exec(s).slice(1).map(function (t, e) { return 3 === e ? parseInt(255 * parseFloat(t), 10) : parseInt(t, 10) }) : c.RGBA_PERCENT.test(s) ? c.RGBA_PERCENT.exec(s).slice(1).map(function (t, e) { return 3 === e ? parseInt(255 * parseFloat(t), 10) : parseInt(parseFloat(t) / 100 * 255, 10) }) : [255], n.Color._getFormattedColor.apply(this, a)); this._colorMode === r.RGB ? t = e = o = arguments[0] : (t = o = arguments[0], e = 0), i = "number" == typeof arguments[1] ? arguments[1] : 255 } return [t, e, o, i] }, n.Color }(0, amdclean.core, amdclean.utilscolor_utils, amdclean.constants), amdclean.p5Element = function (t, e) { var o = amdclean["core"]; function r(t, e, o) { var r = e.bind(o); o.elt.addEventListener(t, r, !1), o._events[t] = r } return o.Element = function (t, e) { this.elt = t, this._pInst = e, this._events = {}, this.width = this.elt.offsetWidth, this.height = this.elt.offsetHeight }, o.Element.prototype.parent = function (t) { return "string" == typeof t ? t = document.getElementById(t) : t instanceof o.Element && (t = t.elt), t.appendChild(this.elt), this }, o.Element.prototype.id = function (t) { return this.elt.id = t, this }, o.Element.prototype.class = function (t) { return this.elt.className += " " + t, this }, o.Element.prototype.mousePressed = function (t) { return r("mousedown", t, this), r("touchstart", t, this), this }, o.Element.prototype.mouseWheel = function (t) { return r("mousewheel", t, this), this }, o.Element.prototype.mouseReleased = function (t) { return r("mouseup", t, this), r("touchend", t, this), this }, o.Element.prototype.mouseClicked = function (t) { return r("click", t, this), this }, o.Element.prototype.mouseMoved = function (t) { return r("mousemove", t, this), r("touchmove", t, this), this }, o.Element.prototype.mouseOver = function (t) { return r("mouseover", t, this), this }, o.Element.prototype.mouseOut = function (t) { return r("mouseout", t, this), this }, o.Element.prototype.touchStarted = function (t) { return r("touchstart", t, this), r("mousedown", t, this), this }, o.Element.prototype.touchMoved = function (t) { return r("touchmove", t, this), r("mousemove", t, this), this }, o.Element.prototype.touchEnded = function (t) { return r("touchend", t, this), r("mouseup", t, this), this }, o.Element.prototype.dragOver = function (t) { return r("dragover", t, this), this }, o.Element.prototype.dragLeave = function (t) { return r("dragleave", t, this), this }, o.Element.prototype.drop = function (t, e) { function n(e) { var r = new o.File(e); return function (e) { r.data = e.target.result, t(r) } } return window.File && window.FileReader && window.FileList && window.Blob ? (r("dragover", function (t) { t.stopPropagation(), t.preventDefault() }, this), r("dragleave", function (t) { t.stopPropagation(), t.preventDefault() }, this), arguments.length > 1 && r("drop", e, this), r("drop", function (t) { t.stopPropagation(), t.preventDefault(); for (var e = t.dataTransfer.files, o = 0; o < e.length; o++) { var r = e[o], i = new FileReader; i.onload = n(r), "text" === r.type ? i.readAsText(r) : i.readAsDataURL(r) } }, this)) : console.log("The File APIs are not fully supported in this browser."), this }, o.Element.prototype._setProperty = function (t, e) { this[t] = e }, o.Element }(), amdclean.p5Graphics = function (t, e, o) { var r = e; o = o; return r.Graphics = function (t, e, o) { r.Element.call(this, t, e), this.canvas = t, this.drawingContext = this.canvas.getContext("2d"), this._pInst = e, o ? (this._isMainCanvas = !0, this._pInst._setProperty("_curElement", this), this._pInst._setProperty("canvas", this.canvas), this._pInst._setProperty("drawingContext", this.drawingContext), this._pInst._setProperty("width", this.width), this._pInst._setProperty("height", this.height)) : (this.canvas.style.display = "none", this._styles = []) }, r.Graphics.prototype = Object.create(r.Element.prototype), r.Graphics.prototype._applyDefaults = function () { this.drawingContext.fillStyle = "#FFFFFF", this.drawingContext.strokeStyle = "#000000", this.drawingContext.lineCap = o.ROUND, this.drawingContext.font = "normal 12px sans-serif" }, r.Graphics.prototype.resize = function (t, e) { this.width = t, this.height = e, this.elt.width = t * this._pInst._pixelDensity, this.elt.height = e * this._pInst._pixelDensity, this.elt.style.width = t + "px", this.elt.style.height = e + "px", this._isMainCanvas && (this._pInst._setProperty("width", this.width), this._pInst._setProperty("height", this.height)), this.drawingContext.scale(this._pInst._pixelDensity, this._pInst._pixelDensity) }, r.Graphics }(0, amdclean.core, amdclean.constants), amdclean.filters = function (t) { "use strict"; var e, o, r, n, i = {}; function s(t, s) { for (var a, l, p, h, c, u, d, f, y, m, g = i._toPixels(t), w = t.width, v = t.height, _ = w * v, x = new Int32Array(_), b = 0; b < _; b++)x[b] = i._getARGB(g, b); var C, T, R, S, E = new Int32Array(_), M = new Int32Array(_), P = new Int32Array(_), A = new Int32Array(_), I = 0; for (function (t) { var i = 3.5 * t | 0; if (e !== (i = i < 1 ? 1 : i < 248 ? i : 248)) { o = 1 + (e = i) << 1, r = new Int32Array(o), n = new Array(o); for (var s = 0; s < o; s++)n[s] = new Int32Array(256); for (var a, l, p, h, c = 1, u = i - 1; c < i; c++) { r[i + c] = r[u] = l = u * u, p = n[i + c], h = n[u--]; for (var d = 0; d < 256; d++)p[d] = h[d] = l * d } a = r[i] = i * i, p = n[i]; for (var f = 0; f < 256; f++)p[f] = a * f } }(s), T = 0; T < v; T++) { for (C = 0; C < w; C++) { if (h = p = l = c = a = 0, (u = C - e) < 0) m = -u, u = 0; else { if (u >= w) break; m = 0 } for (R = m; R < o && !(u >= w); R++) { var k = x[u + I]; c += (S = n[R])[(-16777216 & k) >>> 24], l += S[(16711680 & k) >> 16], p += S[(65280 & k) >> 8], h += S[255 & k], a += r[R], u++ } E[d = I + C] = c / a, M[d] = l / a, P[d] = p / a, A[d] = h / a } I += w } for (I = 0, y = (f = -e) * w, T = 0; T < v; T++) { for (C = 0; C < w; C++) { if (h = p = l = c = a = 0, f < 0) m = d = -f, u = C; else { if (f >= v) break; m = 0, d = f, u = C + y } for (R = m; R < o && !(d >= v); R++)c += (S = n[R])[E[u]], l += S[M[u]], p += S[P[u]], h += S[A[u]], a += r[R], d++ , u += w; x[C + I] = c / a << 24 | l / a << 16 | p / a << 8 | h / a } I += w, y += w, f++ } i._setPixels(g, x) } return i._toPixels = function (t) { return t instanceof ImageData ? t.data : t.getContext("2d").getImageData(0, 0, t.width, t.height).data }, i._getARGB = function (t, e) { var o = 4 * e; return t[o + 3] << 24 & 4278190080 | t[o] << 16 & 16711680 | t[o + 1] << 8 & 65280 | 255 & t[o + 2] }, i._setPixels = function (t, e) { for (var o = 0, r = 0, n = t.length; r < n; r++)t[(o = 4 * r) + 0] = (16711680 & e[r]) >>> 16, t[o + 1] = (65280 & e[r]) >>> 8, t[o + 2] = 255 & e[r], t[o + 3] = (4278190080 & e[r]) >>> 24 }, i._toImageData = function (t) { return t instanceof ImageData ? t : t.getContext("2d").getImageData(0, 0, t.width, t.height) }, i._createImageData = function (t, e) { return i._tmpCanvas = document.createElement("canvas"), i._tmpCtx = i._tmpCanvas.getContext("2d"), this._tmpCtx.createImageData(t, e) }, i.apply = function (t, e, o) { var r = t.getContext("2d"), n = r.getImageData(0, 0, t.width, t.height), i = e(n, o); i instanceof ImageData ? r.putImageData(i, 0, 0, 0, 0, t.width, t.height) : r.putImageData(n, 0, 0, 0, 0, t.width, t.height) }, i.threshold = function (t, e) { var o = i._toPixels(t); void 0 === e && (e = .5); for (var r = Math.floor(255 * e), n = 0; n < o.length; n += 4) { var s; s = .2126 * o[n] + .7152 * o[n + 1] + .0722 * o[n + 2] >= r ? 255 : 0, o[n] = o[n + 1] = o[n + 2] = s } }, i.gray = function (t) { for (var e = i._toPixels(t), o = 0; o < e.length; o += 4) { var r = .2126 * e[o] + .7152 * e[o + 1] + .0722 * e[o + 2]; e[o] = e[o + 1] = e[o + 2] = r } }, i.opaque = function (t) { for (var e = i._toPixels(t), o = 0; o < e.length; o += 4)e[o + 3] = 255; return e }, i.invert = function (t) { for (var e = i._toPixels(t), o = 0; o < e.length; o += 4)e[o] = 255 - e[o], e[o + 1] = 255 - e[o + 1], e[o + 2] = 255 - e[o + 2] }, i.posterize = function (t, e) { var o = i._toPixels(t); if (e < 2 || e > 255) throw new Error("Level must be greater than 2 and less than 255 for posterize"); for (var r = e - 1, n = 0; n < o.length; n += 4) { var s = o[n], a = o[n + 1], l = o[n + 2]; o[n] = 255 * (s * e >> 8) / r, o[n + 1] = 255 * (a * e >> 8) / r, o[n + 2] = 255 * (l * e >> 8) / r } }, i.dilate = function (t) { for (var e, o, r, n, s, a, l, p, h, c, u, d, f, y, m, g, w, v = i._toPixels(t), _ = 0, x = v.length ? v.length / 4 : 0, b = new Int32Array(x); _ < x;)for (e = _, o = _ + t.width; _ < o;)r = n = i._getARGB(v, _), (l = _ - 1) < e && (l = _), (a = _ + 1) >= o && (a = _), (p = _ - t.width) < 0 && (p = 0), (h = _ + t.width) >= x && (h = _), d = i._getARGB(v, p), u = i._getARGB(v, l), f = i._getARGB(v, h), (m = 77 * (u >> 16 & 255) + 151 * (u >> 8 & 255) + 28 * (255 & u)) > (s = 77 * (r >> 16 & 255) + 151 * (r >> 8 & 255) + 28 * (255 & r)) && (n = u, s = m), (y = 77 * ((c = i._getARGB(v, a)) >> 16 & 255) + 151 * (c >> 8 & 255) + 28 * (255 & c)) > s && (n = c, s = y), (g = 77 * (d >> 16 & 255) + 151 * (d >> 8 & 255) + 28 * (255 & d)) > s && (n = d, s = g), (w = 77 * (f >> 16 & 255) + 151 * (f >> 8 & 255) + 28 * (255 & f)) > s && (n = f, s = w), b[_++] = n; i._setPixels(v, b) }, i.erode = function (t) { for (var e, o, r, n, s, a, l, p, h, c, u, d, f, y, m, g, w, v = i._toPixels(t), _ = 0, x = v.length ? v.length / 4 : 0, b = new Int32Array(x); _ < x;)for (e = _, o = _ + t.width; _ < o;)r = n = i._getARGB(v, _), (l = _ - 1) < e && (l = _), (a = _ + 1) >= o && (a = _), (p = _ - t.width) < 0 && (p = 0), (h = _ + t.width) >= x && (h = _), d = i._getARGB(v, p), u = i._getARGB(v, l), f = i._getARGB(v, h), (m = 77 * (u >> 16 & 255) + 151 * (u >> 8 & 255) + 28 * (255 & u)) < (s = 77 * (r >> 16 & 255) + 151 * (r >> 8 & 255) + 28 * (255 & r)) && (n = u, s = m), (y = 77 * ((c = i._getARGB(v, a)) >> 16 & 255) + 151 * (c >> 8 & 255) + 28 * (255 & c)) < s && (n = c, s = y), (g = 77 * (d >> 16 & 255) + 151 * (d >> 8 & 255) + 28 * (255 & d)) < s && (n = d, s = g), (w = 77 * (f >> 16 & 255) + 151 * (f >> 8 & 255) + 28 * (255 & f)) < s && (n = f, s = w), b[_++] = n; i._setPixels(v, b) }, i.blur = function (t, e) { s(t, e) }, i }(), amdclean.p5Image = function (t, e, o) { "use strict"; var r = e, n = o; return r.Image = function (t, e) { this.width = t, this.height = e, this.canvas = document.createElement("canvas"), this.canvas.width = this.width, this.canvas.height = this.height, this.drawingContext = this.canvas.getContext("2d"), this.pixels = [] }, r.Image.prototype._setProperty = function (t, e) { this[t] = e }, r.Image.prototype.loadPixels = function () { r.prototype.loadPixels.call(this) }, r.Image.prototype.updatePixels = function (t, e, o, n) { r.prototype.updatePixels.call(this, t, e, o, n) }, r.Image.prototype.get = function (t, e, o, n) { return r.prototype.get.call(this, t, e, o, n) }, r.Image.prototype.set = function (t, e, o) { r.prototype.set.call(this, t, e, o) }, r.Image.prototype.resize = function (t, e) { t = t || this.canvas.width, e = e || this.canvas.height; var o = document.createElement("canvas"); o.width = t, o.height = e, o.getContext("2d").drawImage(this.canvas, 0, 0, this.canvas.width, this.canvas.height, 0, 0, o.width, o.height), this.canvas.width = this.width = t, this.canvas.height = this.height = e, this.drawingContext.drawImage(o, 0, 0, t, e, 0, 0, t, e), this.pixels.length > 0 && this.loadPixels() }, r.Image.prototype.copy = function () { r.prototype.copy.apply(this, arguments) }, r.Image.prototype.mask = function (t) { void 0 === t && (t = this); var e = this.drawingContext.globalCompositeOperation, o = 1; t instanceof r.Graphics && (o = t._pInst._pixelDensity); var n = [t, 0, 0, o * t.width, o * t.height, 0, 0, this.width, this.height]; this.drawingContext.globalCompositeOperation = "destination-in", this.copy.apply(this, n), this.drawingContext.globalCompositeOperation = e }, r.Image.prototype.filter = function (t, e) { n.apply(this.canvas, n[t.toLowerCase()], e) }, r.Image.prototype.blend = function () { r.prototype.blend.apply(this, arguments) }, r.Image.prototype.save = function (t, e) { var o; if (e) switch (e.toLowerCase()) { case "png": o = "image/png"; break; case "jpeg": case "jpg": o = "image/jpeg"; break; default: o = "image/png" } else e = "png", o = "image/png"; var n = this.canvas.toDataURL(o); n = n.replace(o, "image/octet-stream"), r.prototype.downloadFile(n, t, e) }, r.Image }(0, amdclean.core, amdclean.filters), amdclean.p5File = function (t, e) { var o = amdclean["core"]; return o.File = function (t, e) { this.file = t, this._pInst = e; var o = t.type.split("/"); this.type = o[0], this.subtype = o[1], this.name = t.name, this.size = t.size, this.data = void 0 }, o.File }(), amdclean.polargeometry = { degreesToRadians: function (t) { return 2 * Math.PI * t / 360 }, radiansToDegrees: function (t) { return 360 * t / (2 * Math.PI) } }, amdclean.p5Vector = function (t, e, o, r) { "use strict"; var n = e, i = o; r = r; return n.Vector = function () { var t, e, o; arguments[0] instanceof n ? (this.p5 = arguments[0], t = arguments[1][0] || 0, e = arguments[1][1] || 0, o = arguments[1][2] || 0) : (t = arguments[0] || 0, e = arguments[1] || 0, o = arguments[2] || 0), this.x = t, this.y = e, this.z = o }, n.Vector.prototype.set = function (t, e, o) { return t instanceof n.Vector ? (this.x = t.x || 0, this.y = t.y || 0, this.z = t.z || 0, this) : t instanceof Array ? (this.x = t[0] || 0, this.y = t[1] || 0, this.z = t[2] || 0, this) : (this.x = t || 0, this.y = e || 0, this.z = o || 0, this) }, n.Vector.prototype.copy = function () { return this.p5 ? new n.Vector(this.p5, [this.x, this.y, this.z]) : new n.Vector(this.x, this.y, this.z) }, n.Vector.prototype.add = function (t, e, o) { return t instanceof n.Vector ? (this.x += t.x || 0, this.y += t.y || 0, this.z += t.z || 0, this) : t instanceof Array ? (this.x += t[0] || 0, this.y += t[1] || 0, this.z += t[2] || 0, this) : (this.x += t || 0, this.y += e || 0, this.z += o || 0, this) }, n.Vector.prototype.sub = function (t, e, o) { return t instanceof n.Vector ? (this.x -= t.x || 0, this.y -= t.y || 0, this.z -= t.z || 0, this) : t instanceof Array ? (this.x -= t[0] || 0, this.y -= t[1] || 0, this.z -= t[2] || 0, this) : (this.x -= t || 0, this.y -= e || 0, this.z -= o || 0, this) }, n.Vector.prototype.mult = function (t) { return this.x *= t || 0, this.y *= t || 0, this.z *= t || 0, this }, n.Vector.prototype.div = function (t) { return this.x /= t, this.y /= t, this.z /= t, this }, n.Vector.prototype.mag = function () { return Math.sqrt(this.magSq()) }, n.Vector.prototype.magSq = function () { var t = this.x, e = this.y, o = this.z; return t * t + e * e + o * o }, n.Vector.prototype.dot = function (t, e, o) { return t instanceof n.Vector ? this.dot(t.x, t.y, t.z) : this.x * (t || 0) + this.y * (e || 0) + this.z * (o || 0) }, n.Vector.prototype.cross = function (t) { var e = this.y * t.z - this.z * t.y, o = this.z * t.x - this.x * t.z, r = this.x * t.y - this.y * t.x; return this.p5 ? new n.Vector(this.p5, [e, o, r]) : new n.Vector(e, o, r) }, n.Vector.prototype.dist = function (t) { return t.copy().sub(this).mag() }, n.Vector.prototype.normalize = function () { return this.div(this.mag()) }, n.Vector.prototype.limit = function (t) { var e = this.magSq(); return e > t * t && (this.div(Math.sqrt(e)), this.mult(t)), this }, n.Vector.prototype.setMag = function (t) { return this.normalize().mult(t) }, n.Vector.prototype.heading = function () { var t = Math.atan2(this.y, this.x); return this.p5 ? this.p5._angleMode === r.RADIANS ? t : i.radiansToDegrees(t) : t }, n.Vector.prototype.rotate = function (t) { this.p5 && this.p5._angleMode === r.DEGREES && (t = i.degreesToRadians(t)); var e = this.heading() + t, o = this.mag(); return this.x = Math.cos(e) * o, this.y = Math.sin(e) * o, this }, n.Vector.prototype.lerp = function (t, e, o, r) { return t instanceof n.Vector ? this.lerp(t.x, t.y, t.z, e) : (this.x += (t - this.x) * r || 0, this.y += (e - this.y) * r || 0, this.z += (o - this.z) * r || 0, this) }, n.Vector.prototype.array = function () { return [this.x || 0, this.y || 0, this.z || 0] }, n.Vector.prototype.equals = function (t, e, o) { return t instanceof n.Vector ? (e = (t = t.x || 0).y || 0, o = t.z || 0) : t instanceof Array ? (e = (t = t[0] || 0)[1] || 0, o = t[2] || 0) : (t = t || 0, e = e || 0, o = o || 0), this.x === t && this.y === e && this.z === o }, n.Vector.fromAngle = function (t) { return this.p5 && this.p5._angleMode === r.DEGREES && (t = i.degreesToRadians(t)), this.p5 ? new n.Vector(this.p5, [Math.cos(t), Math.sin(t), 0]) : new n.Vector(Math.cos(t), Math.sin(t), 0) }, n.Vector.random2D = function () { var t; return t = this.p5 ? this.p5._angleMode === r.DEGREES ? this.p5.random(360) : this.p5.random(r.TWO_PI) : Math.random() * Math.PI * 2, this.fromAngle(t) }, n.Vector.random3D = function () { var t, e; this.p5 ? (t = this.p5.random(0, r.TWO_PI), e = this.p5.random(-1, 1)) : (t = Math.random() * Math.PI * 2, e = 2 * Math.random() - 1); var o = Math.sqrt(1 - e * e) * Math.cos(t), i = Math.sqrt(1 - e * e) * Math.sin(t); return this.p5 ? new n.Vector(this.p5, [o, i, e]) : new n.Vector(o, i, e) }, n.Vector.add = function (t, e, o) { return o ? o.set(t) : o = t.copy(), o.add(e), o }, n.Vector.sub = function (t, e, o) { return o ? o.set(t) : o = t.copy(), o.sub(e), o }, n.Vector.mult = function (t, e, o) { return o ? o.set(t) : o = t.copy(), o.mult(e), o }, n.Vector.div = function (t, e, o) { return o ? o.set(t) : o = t.copy(), o.div(e), o }, n.Vector.dot = function (t, e) { return t.dot(e) }, n.Vector.cross = function (t, e) { return t.cross(e) }, n.Vector.dist = function (t, e) { return t.dist(e) }, n.Vector.lerp = function (t, e, o, r) { return r ? r.set(t) : r = t.copy(), r.lerp(e, o), r }, n.Vector.angleBetween = function (t, e) { var o = Math.acos(t.dot(e) / (t.mag() * e.mag())); return this.p5 && this.p5._angleMode === r.DEGREES && (o = i.radiansToDegrees(o)), o }, n.Vector }(0, amdclean.core, amdclean.polargeometry, amdclean.constants), amdclean.p5TableRow = function (t, e) { "use strict"; var o = amdclean["core"]; return o.TableRow = function (t, e) { var o = [], r = {}; t && (e = e || ",", o = t.split(e)); for (var n = 0; n < o.length; n++) { var i = n, s = o[n]; r[i] = s } this.arr = o, this.obj = r, this.table = null }, o.TableRow.prototype.set = function (t, e) { if ("string" == typeof t) { var o = this.table.columns.indexOf(t); if (!(o >= 0)) throw 'This table has no column named "' + t + '"'; this.obj[t] = e, this.arr[o] = e } else { if (!(t < this.table.columns.length)) throw "Column #" + t + " is out of the range of this table"; this.arr[t] = e; var r = this.table.columns[t]; this.obj[r] = e } }, o.TableRow.prototype.setNum = function (t, e) { var o = parseFloat(e, 10); this.set(t, o) }, o.TableRow.prototype.setString = function (t, e) { var o = e.toString(); this.set(t, o) }, o.TableRow.prototype.get = function (t) { return "string" == typeof t ? this.obj[t] : this.arr[t] }, o.TableRow.prototype.getNum = function (t) { var e; if ("NaN" === (e = "string" == typeof t ? parseFloat(this.obj[t], 10) : parseFloat(this.arr[t], 10)).toString()) throw "Error: " + this.obj[t] + " is NaN (Not a Number)"; return e }, o.TableRow.prototype.getString = function (t) { return "string" == typeof t ? this.obj[t].toString() : this.arr[t].toString() }, o.TableRow }(), amdclean.p5Table = function (t, e) { "use strict"; var o = amdclean["core"]; return o.Table = function (t) { this.columns = [], this.rows = [] }, o.Table.prototype.addRow = function (t) { var e = t || new o.TableRow; if (void 0 === e.arr || void 0 === e.obj) throw "invalid TableRow: " + e; return e.table = this, this.rows.push(e), e }, o.Table.prototype.removeRow = function (t) { this.rows[t].table = null; var e = this.rows.splice(t + 1, this.rows.length); this.rows.pop(), this.rows = this.rows.concat(e) }, o.Table.prototype.getRow = function (t) { return this.rows[t] }, o.Table.prototype.getRows = function () { return this.rows }, o.Table.prototype.findRow = function (t, e) { if ("string" == typeof e) { for (var o = 0; o < this.rows.length; o++)if (this.rows[o].obj[e] === t) return this.rows[o] } else for (var r = 0; r < this.rows.length; r++)if (this.rows[r].arr[e] === t) return this.rows[r]; return null }, o.Table.prototype.findRows = function (t, e) { var o = []; if ("string" == typeof e) for (var r = 0; r < this.rows.length; r++)this.rows[r].obj[e] === t && o.push(this.rows[r]); else for (var n = 0; n < this.rows.length; n++)this.rows[n].arr[e] === t && o.push(this.rows[n]); return o }, o.Table.prototype.matchRow = function (t, e) { if ("number" == typeof e) { for (var o = 0; o < this.rows.length; o++)if (this.rows[o].arr[e].match(t)) return this.rows[o] } else for (var r = 0; r < this.rows.length; r++)if (this.rows[r].obj[e].match(t)) return this.rows[r]; return null }, o.Table.prototype.matchRows = function (t, e) { var o = []; if ("number" == typeof e) for (var r = 0; r < this.rows.length; r++)this.rows[r].arr[e].match(t) && o.push(this.rows[r]); else for (var n = 0; n < this.rows.length; n++)this.rows[n].obj[e].match(t) && o.push(this.rows[n]); return o }, o.Table.prototype.getColumn = function (t) { var e = []; if ("string" == typeof t) for (var o = 0; o < this.rows.length; o++)e.push(this.rows[o].obj[t]); else for (var r = 0; r < this.rows.length; r++)e.push(this.rows[r].arr[t]); return e }, o.Table.prototype.clearRows = function () { delete this.rows, this.rows = [] }, o.Table.prototype.addColumn = function (t) { var e = t || null; this.columns.push(e) }, o.Table.prototype.getColumnCount = function () { return this.columns.length }, o.Table.prototype.getRowCount = function () { return this.rows.length }, o.Table.prototype.removeTokens = function (t, e) { for (var o = function (t) { return t.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&") }, r = [], n = 0; n < t.length; n++)r.push(o(t.charAt(n))); var i = new RegExp(r.join("|"), "g"); if (void 0 === e) for (var s = 0; s < this.columns.length; s++)for (var a = 0; a < this.rows.length; a++) { var l = this.rows[a].arr[s]; l = l.replace(i, ""), this.rows[a].arr[s] = l, this.rows[a].obj[this.columns[s]] = l } else if ("string" == typeof e) for (var p = 0; p < this.rows.length; p++) { var h = this.rows[p].obj[e]; h = h.replace(i, ""), this.rows[p].obj[e] = h; var c = this.columns.indexOf(e); this.rows[p].arr[c] = h } else for (var u = 0; u < this.rows.length; u++) { var d = this.rows[u].arr[e]; d = d.replace(i, ""), this.rows[u].arr[e] = d, this.rows[u].obj[this.columns[e]] = d } }, o.Table.prototype.trim = function (t) { var e = new RegExp(" ", "g"); if (void 0 === t) for (var o = 0; o < this.columns.length; o++)for (var r = 0; r < this.rows.length; r++) { var n = this.rows[r].arr[o]; n = n.replace(e, ""), this.rows[r].arr[o] = n, this.rows[r].obj[this.columns[o]] = n } else if ("string" == typeof t) for (var i = 0; i < this.rows.length; i++) { var s = this.rows[i].obj[t]; s = s.replace(e, ""), this.rows[i].obj[t] = s; var a = this.columns.indexOf(t); this.rows[i].arr[a] = s } else for (var l = 0; l < this.rows.length; l++) { var p = this.rows[l].arr[t]; p = p.replace(e, ""), this.rows[l].arr[t] = p, this.rows[l].obj[this.columns[t]] = p } }, o.Table.prototype.removeColumn = function (t) { var e, o; "string" == typeof t ? (e = t, o = this.columns.indexOf(t), console.log("string")) : (o = t, e = this.columns[t]); var r = this.columns.splice(o + 1, this.columns.length); this.columns.pop(), this.columns = this.columns.concat(r); for (var n = 0; n < this.rows.length; n++) { var i = this.rows[n].arr, s = i.splice(o + 1, i.length); i.pop(), this.rows[n].arr = i.concat(s), delete this.rows[n].obj[e] } }, o.Table.prototype.set = function (t, e, o) { this.rows[t].set(e, o) }, o.Table.prototype.setNum = function (t, e, o) { this.rows[t].set(e, o) }, o.Table.prototype.setString = function (t, e, o) { this.rows[t].set(e, o) }, o.Table.prototype.get = function (t, e) { return this.rows[t].get(e) }, o.Table.prototype.getNum = function (t, e) { return this.rows[t].getNum(e) }, o.Table.prototype.getString = function (t, e) { return this.rows[t].getString(e) }, o.Table }(), amdclean.colorcreating_reading = function (t, e, o) { "use strict"; var r = e; return r.prototype.alpha = function (t) { if (t instanceof r.Color || t instanceof Array) return this.color(t).getAlpha(); throw new Error("Needs p5.Color or pixel array as argument.") }, r.prototype.blue = function (t) { if (t instanceof r.Color || t instanceof Array) return this.color(t).getBlue(); throw new Error("Needs p5.Color or pixel array as argument.") }, r.prototype.brightness = function (t) { if (!t instanceof r.Color) throw new Error("Needs p5.Color as argument."); return t.getBrightness() }, r.prototype.color = function () { if (arguments[0] instanceof r.Color) return arguments[0]; if (arguments[0] instanceof Array) return new r.Color(this, arguments[0]); var t = Array.prototype.slice.call(arguments); return new r.Color(this, t) }, r.prototype.green = function (t) { if (t instanceof r.Color || t instanceof Array) return this.color(t).getGreen(); throw new Error("Needs p5.Color or pixel array as argument.") }, r.prototype.hue = function (t) { if (!t instanceof r.Color) throw new Error("Needs p5.Color as argument."); return t.getHue() }, r.prototype.lerpColor = function (t, e, o) { if (o = Math.max(Math.min(o, 1), 0), t instanceof Array) { for (var n = [], i = 0; i < t.length; i++)n.push(Math.sqrt(r.prototype.lerp(t[i] * t[i], e[i] * e[i], o))); return n } if (t instanceof r.Color) { for (var s = [], a = 0; a < 4; a++)s.push(Math.sqrt(r.prototype.lerp(t.rgba[a] * t.rgba[a], e.rgba[a] * e.rgba[a], o))); return new r.Color(this, s) } return Math.sqrt(r.prototype.lerp(t * t, e * e, o)) }, r.prototype.red = function (t) { if (t instanceof r.Color || t instanceof Array) return this.color(t).getRed(); throw new Error("Needs p5.Color or pixel array as argument.") }, r.prototype.saturation = function (t) { if (!t instanceof r.Color) throw new Error("Needs p5.Color as argument."); return t.getSaturation() }, r }(0, amdclean.core, amdclean.p5Color), amdclean.colorsetting = function (t, e, o, r) { "use strict"; var n = e; o = o; return n.prototype._doStroke = !0, n.prototype._doFill = !0, n.prototype._colorMode = o.RGB, n.prototype._maxRGB = [255, 255, 255, 255], n.prototype._maxHSB = [255, 255, 255, 255], n.prototype.background = function () { if (this.drawingContext.save(), this.drawingContext.setTransform(1, 0, 0, 1, 0, 0), this.drawingContext.scale(this._pixelDensity, this._pixelDensity), arguments[0] instanceof n.Image) this.image(arguments[0], 0, 0, this.width, this.height); else { var t = this.drawingContext.fillStyle, e = this.color.apply(this, arguments).toString(); this.drawingContext.fillStyle = e, this.drawingContext.fillRect(0, 0, this.width, this.height), this.drawingContext.fillStyle = t } this.drawingContext.restore() }, n.prototype.clear = function () { this.drawingContext.clearRect(0, 0, this.width, this.height) }, n.prototype.colorMode = function () { if (arguments[0] === o.RGB || arguments[0] === o.HSB) { this._colorMode = arguments[0]; var t = this._colorMode === o.RGB ? this._maxRGB : this._maxHSB; 2 === arguments.length ? (t[0] = arguments[1], t[1] = arguments[1], t[2] = arguments[1], t[3] = arguments[1]) : arguments.length > 2 && (t[0] = arguments[1], t[1] = arguments[2], t[2] = arguments[3]), 5 === arguments.length && (t[3] = arguments[4]) } }, n.prototype.fill = function () { this._setProperty("_doFill", !0); var t = this.drawingContext, e = this.color.apply(this, arguments); t.fillStyle = e.toString() }, n.prototype.noFill = function () { this._setProperty("_doFill", !1) }, n.prototype.noStroke = function () { this._setProperty("_doStroke", !1) }, n.prototype.stroke = function () { this._setProperty("_doStroke", !0); var t = this.drawingContext, e = this.color.apply(this, arguments); t.strokeStyle = e.toString() }, n }(0, amdclean.core, amdclean.constants, amdclean.p5Color), amdclean.dataconversion = function (t, e) { "use strict"; var o = amdclean["core"]; return o.prototype.float = function (t) { return parseFloat(t) }, o.prototype.int = function (t, e) { return "string" == typeof t ? (e = e || 10, parseInt(t, e)) : "number" == typeof t ? 0 | t : "boolean" == typeof t ? t ? 1 : 0 : t instanceof Array ? t.map(function (t) { return o.prototype.int(t, e) }) : void 0 }, o.prototype.str = function (t) { return t instanceof Array ? t.map(o.prototype.str) : String(t) }, o.prototype.boolean = function (t) { return "number" == typeof t ? 0 !== t : "string" == typeof t ? "true" === t.toLowerCase() : "boolean" == typeof t ? t : t instanceof Array ? t.map(o.prototype.boolean) : void 0 }, o.prototype.byte = function (t) { var e = o.prototype.int(t, 10); return "number" == typeof e ? (e + 128) % 256 - 128 : e instanceof Array ? e.map(o.prototype.byte) : void 0 }, o.prototype.char = function (t) { return "number" != typeof t || isNaN(t) ? t instanceof Array ? t.map(o.prototype.char) : "string" == typeof t ? o.prototype.char(parseInt(t, 10)) : void 0 : String.fromCharCode(t) }, o.prototype.unchar = function (t) { return "string" == typeof t && 1 === t.length ? t.charCodeAt(0) : t instanceof Array ? t.map(o.prototype.unchar) : void 0 }, o.prototype.hex = function (t, e) { if (e = null == e ? e = 8 : e, t instanceof Array) return t.map(function (t) { return o.prototype.hex(t, e) }); if ("number" == typeof t) { t < 0 && (t = 4294967295 + t + 1); for (var r = Number(t).toString(16).toUpperCase(); r.length < e;)r = "0" + r; return r.length >= e && (r = r.substring(r.length - e, r.length)), r } }, o.prototype.unhex = function (t) { return t instanceof Array ? t.map(o.prototype.unhex) : parseInt("0x" + t, 16) }, o }(), amdclean.dataarray_functions = function (t, e) { "use strict"; var o = amdclean["core"]; return o.prototype.append = function (t, e) { return t.push(e), t }, o.prototype.arrayCopy = function (t, e, o, r, n) { var i, s; void 0 !== n ? (s = Math.min(n, t.length), i = r, t = t.slice(e, s + e)) : (void 0 !== o ? (s = o, s = Math.min(s, t.length)) : s = t.length, i = 0, o = e, t = t.slice(0, s)), Array.prototype.splice.apply(o, [i, s].concat(t)) }, o.prototype.concat = function (t, e) { return t.concat(e) }, o.prototype.reverse = function (t) { return t.reverse() }, o.prototype.shorten = function (t) { return t.pop(), t }, o.prototype.shuffle = function (t, e) { for (var o, r, n = (t = e || ArrayBuffer.isView(t) ? t : t.slice()).length; n > 1;)o = Math.random() * n | 0, r = t[--n], t[n] = t[o], t[o] = r; return t }, o.prototype.sort = function (t, e) { var o = e ? t.slice(0, Math.min(e, t.length)) : t, r = e ? t.slice(Math.min(e, t.length)) : []; return (o = "string" == typeof o[0] ? o.sort() : o.sort(function (t, e) { return t - e })).concat(r) }, o.prototype.splice = function (t, e, o) { return Array.prototype.splice.apply(t, [o, 0].concat(e)), t }, o.prototype.subset = function (t, e, o) { return void 0 !== o ? t.slice(e, e + o) : t.slice(e, t.length) }, o }(), amdclean.datastring_functions = function (t, e) { "use strict"; var o = amdclean["core"]; function r() { var t = arguments[0], e = t < 0, o = e ? t.toString().substring(1) : t.toString(), r = o.indexOf("."), n = -1 !== r ? o.substring(0, r) : o, i = -1 !== r ? o.substring(r + 1) : "", s = e ? "-" : ""; if (3 === arguments.length) { for (var a = 0; a < arguments[1] - n.length; a++)s += "0"; s += n, s += ".", s += i; for (var l = 0; l < arguments[2] - i.length; l++)s += "0"; return s } for (var p = 0; p < Math.max(arguments[1] - n.length, 0); p++)s += "0"; return s += o } function n() { var t = arguments[0].toString(), e = t.indexOf("."), o = -1 !== e ? t.substring(e) : "", r = -1 !== e ? t.substring(0, e) : t; return r = r.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","), 0 === arguments[1] && (o = ""), arguments.length > 1 && (o = o.substring(0, arguments[1] + 1)), r + o } function i() { return parseFloat(arguments[0]) > 0 ? "+" + arguments[0].toString() : arguments[0].toString() } function s() { return parseFloat(arguments[0]) > 0 ? " " + arguments[0].toString() : arguments[0].toString() } return o.prototype.join = function (t, e) { return t.join(e) }, o.prototype.match = function (t, e) { return t.match(e) }, o.prototype.matchAll = function (t, e) { for (var o = new RegExp(e, "g"), r = o.exec(t), n = []; null !== r;)n.push(r), r = o.exec(t); return n }, o.prototype.nf = function () { if (arguments[0] instanceof Array) { var t = arguments[1], e = arguments[2]; return arguments[0].map(function (o) { return r(o, t, e) }) } return r.apply(this, arguments) }, o.prototype.nfc = function () { if (arguments[0] instanceof Array) { var t = arguments[1]; return arguments[0].map(function (e) { return n(e, t) }) } return n.apply(this, arguments) }, o.prototype.nfp = function () { var t = this.nf(arguments); return t instanceof Array ? t.map(i) : i(t) }, o.prototype.nfs = function () { var t = this.nf(arguments); return t instanceof Array ? t.map(s) : s(t) }, o.prototype.split = function (t, e) { return t.split(e) }, o.prototype.splitTokens = function () { var t = arguments.length > 0 ? arguments[1] : /\s/g; return arguments[0].split(t).filter(function (t) { return t }) }, o.prototype.trim = function (t) { return t instanceof Array ? t.map(this.trim) : t.trim() }, o }(), amdclean.environment = function (t, e, o) { "use strict"; var r = amdclean["core"], n = amdclean["constants"], i = [n.ARROW, n.CROSS, n.HAND, n.MOVE, n.TEXT, n.WAIT]; return r.prototype._frameRate = 0, r.prototype._lastFrameTime = (new Date).getTime(), r.prototype._targetFrameRate = 60, r.prototype.frameCount = 0, r.prototype.focused = !0, r.prototype.cursor = function (t, e, o) { var r = "auto", n = this._curElement.elt; if (i.indexOf(t) > -1) r = t; else if ("string" == typeof t) { var s = ""; e && o && "number" == typeof e && "number" == typeof o && (s = e + " " + o), r = "http://" !== t.substring(0, 6) ? "url(" + t + ") " + s + ", auto" : /\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(t) ? "url(" + t + ") " + s + ", auto" : t } n.style.cursor = r }, r.prototype.frameRate = function (t) { return void 0 === t ? this._frameRate : (this._setProperty("_targetFrameRate", t), this._runFrames(), this) }, r.prototype.getFrameRate = function () { return this.frameRate() }, r.prototype.setFrameRate = function (t) { return this.frameRate(t) }, r.prototype.noCursor = function () { this._curElement.elt.style.cursor = "none" }, r.prototype.displayWidth = screen.width, r.prototype.displayHeight = screen.height, r.prototype.windowWidth = window.innerWidth, r.prototype.windowHeight = window.innerHeight, r.prototype._onresize = function (t) { this._setProperty("windowWidth", window.innerWidth), this._setProperty("windowHeight", window.innerHeight); var e, o = this._isGlobal ? window : this; "function" == typeof o.windowResized && (void 0 === (e = o.windowResized(t)) || e || t.preventDefault()) }, r.prototype.width = 0, r.prototype.height = 0, r.prototype.fullscreen = function (t) { if (void 0 === t) return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement; t ? function (t) { if (!(document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled)) throw new Error("Fullscreen not enabled in this browser."); t.requestFullscreen ? t.requestFullscreen() : t.mozRequestFullScreen ? t.mozRequestFullScreen() : t.webkitRequestFullscreen ? t.webkitRequestFullscreen() : t.msRequestFullscreen && t.msRequestFullscreen() }(document.documentElement) : document.exitFullscreen ? document.exitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitExitFullscreen ? document.webkitExitFullscreen() : document.msExitFullscreen && document.msExitFullscreen() }, r.prototype.devicePixelScaling = function (t) { this._pixelDensity = t ? "number" == typeof t ? t : window.devicePixelRatio || 1 : 1, this.resizeCanvas(this.width, this.height, !0) }, r.prototype.getURL = function () { return location.href }, r.prototype.getURLPath = function () { return location.pathname.split("/").filter(function (t) { return "" !== t }) }, r.prototype.getURLParams = function () { for (var t, e = /[?&]([^&=]+)(?:[&=])([^&=]+)/gim, o = {}; null != (t = e.exec(location.search));)t.index === e.lastIndex && e.lastIndex++ , o[t[1]] = t[2]; return o }, r }(), amdclean.imageimage = function (t, e, o) { "use strict"; var r = e; o = o; return r.prototype._imageMode = o.CORNER, r.prototype._tint = null, r.prototype.createImage = function (t, e) { return new r.Image(t, e) }, r }(0, amdclean.core, amdclean.constants), amdclean.canvas = function (t, e) { e = e; return { modeAdjust: function (t, o, r, n, i) { return i === e.CORNER ? { x: t, y: o, w: r, h: n } : i === e.CORNERS ? { x: t, y: o, w: r - t, h: n - o } : i === e.RADIUS ? { x: t - r, y: o - n, w: 2 * r, h: 2 * n } : i === e.CENTER ? { x: t - .5 * r, y: o - .5 * n, w: r, h: n } : void 0 }, arcModeAdjust: function (t, o, r, n, i) { return i === e.CORNER ? { x: t + .5 * r, y: o + .5 * n, w: r, h: n } : i === e.CORNERS ? { x: t, y: o, w: r + t, h: n + o } : i === e.RADIUS ? { x: t, y: o, w: 2 * r, h: 2 * n } : i === e.CENTER ? { x: t, y: o, w: r, h: n } : void 0 } } }(0, amdclean.constants), amdclean.imageloading_displaying = function (t, e, o, r, n) { "use strict"; var i = e, s = o; r = r, n = n; return i.prototype.loadImage = function (t, e, o) { var r = new Image, n = new i.Image(1, 1, this); return r.onload = function () { n.width = n.canvas.width = r.width, n.height = n.canvas.height = r.height, n.canvas.getContext("2d").drawImage(r, 0, 0), "function" == typeof e && e(n) }, r.onerror = function (t) { "function" == typeof o && o(t) }, 0 !== t.indexOf("data:image/") && (r.crossOrigin = "Anonymous"), r.src = t, n }, i.prototype.image = function (t, e, o, n, i) { var s = t.canvas || t.elt; e = e || 0, o = o || 0, n = n || t.width, i = i || t.height; var a = r.modeAdjust(e, o, n, i, this._imageMode); try { this._tint && t.canvas ? this.drawingContext.drawImage(this._getTintedImageCanvas(t), a.x, a.y, a.w, a.h) : this.drawingContext.drawImage(s, a.x, a.y, a.w, a.h) } catch (t) { if ("NS_ERROR_NOT_AVAILABLE" !== t.name) throw t } }, i.prototype.tint = function () { var t = this.color.apply(this, arguments); this._tint = t.rgba }, i.prototype.noTint = function () { this._tint = null }, i.prototype._getTintedImageCanvas = function (t) { if (!t.canvas) return t; var e = s._toPixels(t.canvas), o = document.createElement("canvas"); o.width = t.canvas.width, o.height = t.canvas.height; for (var r = o.getContext("2d"), n = r.createImageData(t.canvas.width, t.canvas.height), i = n.data, a = 0; a < e.length; a += 4) { var l = e[a], p = e[a + 1], h = e[a + 2], c = e[a + 3]; i[a] = l * this._tint[0] / 255, i[a + 1] = p * this._tint[1] / 255, i[a + 2] = h * this._tint[2] / 255, i[a + 3] = c * this._tint[3] / 255 } return r.putImageData(n, 0, 0), o }, i.prototype.imageMode = function (t) { t !== n.CORNER && t !== n.CORNERS && t !== n.CENTER || (this._imageMode = t) }, i }(0, amdclean.core, amdclean.filters, amdclean.canvas, amdclean.constants), amdclean.imagepixels = function (t, e, o, r) { "use strict"; var n = e, i = o; return n.prototype.pixels = [], n.prototype.blend = function () { var t = this.drawingContext.globalCompositeOperation, e = arguments[arguments.length - 1], o = Array.prototype.slice.call(arguments, 0, arguments.length - 1); this.drawingContext.globalCompositeOperation = e, this.copy.apply(this, o), this.drawingContext.globalCompositeOperation = t }, n.prototype.copy = function () { var t, e, o, r, n, i, s, a, l; if (9 === arguments.length) t = arguments[0], e = arguments[1], o = arguments[2], r = arguments[3], n = arguments[4], i = arguments[5], s = arguments[6], a = arguments[7], l = arguments[8]; else { if (8 !== arguments.length) throw new Error("Signature not supported"); e = arguments[0], o = arguments[1], r = arguments[2], n = arguments[3], i = arguments[4], s = arguments[5], a = arguments[6], l = arguments[7], t = this } var p = t.canvas.width / t.width; this.drawingContext.drawImage(t.canvas, p * e, p * o, p * r, p * n, i, s, a, l) }, n.prototype.filter = function (t, e) { i.apply(this.canvas, i[t.toLowerCase()], e) }, n.prototype.get = function (t, e, o, r) { if (void 0 === t && void 0 === e && void 0 === o && void 0 === r ? (t = 0, e = 0, o = this.width, r = this.height) : void 0 === o && void 0 === r && (o = 1, r = 1), t > this.width || e > this.height || t < 0 || e < 0) return [0, 0, 0, 255]; var i = this.drawingContext.getImageData(t, e, o, r), s = i.data; if (1 === o && 1 === r) { for (var a = [], l = 0; l < s.length; l += 4)a.push(s[l], s[l + 1], s[l + 2], s[l + 3]); return a } o = Math.min(o, this.width), r = Math.min(r, this.height); var p = new n.Image(o, r); return p.canvas.getContext("2d").putImageData(i, 0, 0, 0, 0, o, r), p }, n.prototype.loadPixels = function () { var t = this.width, e = this.height, o = this.drawingContext.getImageData(0, 0, t, e); this._setProperty("imageData", o), this._setProperty("pixels", o.data) }, n.prototype.set = function (t, e, o) { if (o instanceof n.Image) this.drawingContext.save(), this.drawingContext.setTransform(1, 0, 0, 1, 0, 0), this.drawingContext.scale(this._pixelDensity, this._pixelDensity), this.drawingContext.drawImage(o.canvas, t, e), this.loadPixels.call(this), this.drawingContext.restore(); else { var r = 4 * (e * this.width + t); if (this.imageData || this.loadPixels.call(this), "number" == typeof o) r < this.pixels.length && (this.pixels[r] = o, this.pixels[r + 1] = o, this.pixels[r + 2] = o, this.pixels[r + 3] = 255); else if (o instanceof Array) { if (o.length < 4) throw new Error("pixel array must be of the form [R, G, B, A]"); r < this.pixels.length && (this.pixels[r] = o[0], this.pixels[r + 1] = o[1], this.pixels[r + 2] = o[2], this.pixels[r + 3] = o[3]) } else o instanceof n.Color && r < this.pixels.length && (this.pixels[r] = o.rgba[0], this.pixels[r + 1] = o.rgba[1], this.pixels[r + 2] = o.rgba[2], this.pixels[r + 3] = o.rgba[3]) } }, n.prototype.updatePixels = function (t, e, o, r) { void 0 === t && void 0 === e && void 0 === o && void 0 === r && (t = 0, e = 0, o = this.width, r = this.height), this.drawingContext.putImageData(this.imageData, t, e, 0, 0, o, r) }, n }(0, amdclean.core, amdclean.filters, amdclean.p5Color), context = amdclean, definition = function () { var win = window, doc = document, httpsRe = /^http/, protocolRe = /(^\w+):\/\//, twoHundo = /^(20\d|1223)$/, byTag = "getElementsByTagName", readyState = "readyState", contentType = "Content-Type", requestedWith = "X-Requested-With", head = doc[byTag]("head")[0], uniqid = 0, callbackPrefix = "reqwest_" + +new Date, lastValue, xmlHttpRequest = "XMLHttpRequest", xDomainRequest = "XDomainRequest", noop = function () { }, isArray = "function" == typeof Array.isArray ? Array.isArray : function (t) { return t instanceof Array }, defaultHeaders = { contentType: "application/x-www-form-urlencoded", requestedWith: xmlHttpRequest, accept: { "*": "text/javascript, text/html, application/xml, text/xml, */*", xml: "application/xml, text/xml", html: "text/html", text: "text/plain", json: "application/json, text/javascript", js: "application/javascript, text/javascript" } }, xhr = function (t) { if (!0 === t.crossOrigin) { var e = win[xmlHttpRequest] ? new XMLHttpRequest : null; if (e && "withCredentials" in e) return e; if (win[xDomainRequest]) return new XDomainRequest; throw new Error("Browser does not support cross-origin requests") } return win[xmlHttpRequest] ? new XMLHttpRequest : new ActiveXObject("Microsoft.XMLHTTP") }, globalSetupOptions = { dataFilter: function (t) { return t } }; function succeed(t) { var e = protocolRe.exec(t.url); return e = e && e[1] || window.location.protocol, httpsRe.test(e) ? twoHundo.test(t.request.status) : !!t.request.response } function handleReadyState(t, e, o) { return function () { return t._aborted ? o(t.request) : t._timedOut ? o(t.request, "Request is aborted: timeout") : void (t.request && 4 == t.request[readyState] && (t.request.onreadystatechange = noop, succeed(t) ? e(t.request) : o(t.request))) } } function setHeaders(t, e) { var o, r = e.headers || {}; r.Accept = r.Accept || defaultHeaders.accept[e.type] || defaultHeaders.accept["*"]; var n = "function" == typeof FormData && e.data instanceof FormData; for (o in e.crossOrigin || r[requestedWith] || (r[requestedWith] = defaultHeaders.requestedWith), r[contentType] || n || (r[contentType] = e.contentType || defaultHeaders.contentType), r) r.hasOwnProperty(o) && "setRequestHeader" in t && t.setRequestHeader(o, r[o]) } function setCredentials(t, e) { void 0 !== e.withCredentials && void 0 !== t.withCredentials && (t.withCredentials = !!e.withCredentials) } function generalCallback(t) { lastValue = t } function urlappend(t, e) { return t + (/\?/.test(t) ? "&" : "?") + e } function handleJsonp(t, e, o, r) { var n = uniqid++, i = t.jsonpCallback || "callback", s = t.jsonpCallbackName || reqwest.getcallbackPrefix(n), a = new RegExp("((^|\\?|&)" + i + ")=([^&]+)"), l = r.match(a), p = doc.createElement("script"), h = 0, c = -1 !== navigator.userAgent.indexOf("MSIE 10.0"); return l ? "?" === l[3] ? r = r.replace(a, "$1=" + s) : s = l[3] : r = urlappend(r, i + "=" + s), win[s] = generalCallback, p.type = "text/javascript", p.src = r, p.async = !0, void 0 === p.onreadystatechange || c || (p.htmlFor = p.id = "_reqwest_" + n), p.onload = p.onreadystatechange = function () { if (p[readyState] && "complete" !== p[readyState] && "loaded" !== p[readyState] || h) return !1; p.onload = p.onreadystatechange = null, p.onclick && p.onclick(), e(lastValue), lastValue = void 0, head.removeChild(p), h = 1 }, head.appendChild(p), { abort: function () { p.onload = p.onreadystatechange = null, o({}, "Request is aborted: timeout", {}), lastValue = void 0, head.removeChild(p), h = 1 } } } function getRequest(t, e) { var o, r = this.o, n = (r.method || "GET").toUpperCase(), i = "string" == typeof r ? r : r.url, s = !1 !== r.processData && r.data && "string" != typeof r.data ? reqwest.toQueryString(r.data) : r.data || null, a = !1; return "jsonp" != r.type && "GET" != n || !s || (i = urlappend(i, s), s = null), "jsonp" == r.type ? handleJsonp(r, t, e, i) : ((o = r.xhr && r.xhr(r) || xhr(r)).open(n, i, !1 !== r.async), setHeaders(o, r), setCredentials(o, r), win[xDomainRequest] && o instanceof win[xDomainRequest] ? (o.onload = t, o.onerror = e, o.onprogress = function () { }, a = !0) : o.onreadystatechange = handleReadyState(this, t, e), r.before && r.before(o), a ? setTimeout(function () { o.send(s) }, 200) : o.send(s), o) } function Reqwest(t, e) { this.o = t, this.fn = e, init.apply(this, arguments) } function setType(t) { return t.match("json") ? "json" : t.match("javascript") ? "js" : t.match("text") ? "html" : t.match("xml") ? "xml" : void 0 } function init(o, fn) { this.url = "string" == typeof o ? o : o.url, this.timeout = null, this._fulfilled = !1, this._successHandler = function () { }, this._fulfillmentHandlers = [], this._errorHandlers = [], this._completeHandlers = [], this._erred = !1, this._responseArgs = {}; var self = this; function complete(t) { for (o.timeout && clearTimeout(self.timeout), self.timeout = null; self._completeHandlers.length > 0;)self._completeHandlers.shift()(t) } function success(resp) { var type = o.type || resp && setType(resp.getResponseHeader("Content-Type")); resp = "jsonp" !== type ? self.request : resp; var filteredResponse = globalSetupOptions.dataFilter(resp.responseText, type), r = filteredResponse; try { resp.responseText = r } catch (t) { } if (r) switch (type) { case "json": try { resp = win.JSON ? win.JSON.parse(r) : eval("(" + r + ")") } catch (t) { return error(resp, "Could not parse JSON in response", t) } break; case "js": resp = eval(r); break; case "html": resp = r; break; case "xml": resp = resp.responseXML && resp.responseXML.parseError && resp.responseXML.parseError.errorCode && resp.responseXML.parseError.reason ? null : resp.responseXML }for (self._responseArgs.resp = resp, self._fulfilled = !0, fn(resp), self._successHandler(resp); self._fulfillmentHandlers.length > 0;)resp = self._fulfillmentHandlers.shift()(resp); complete(resp) } function timedOut() { self._timedOut = !0, self.request.abort() } function error(t, e, o) { for (t = self.request, self._responseArgs.resp = t, self._responseArgs.msg = e, self._responseArgs.t = o, self._erred = !0; self._errorHandlers.length > 0;)self._errorHandlers.shift()(t, e, o); complete(t) } fn = fn || function () { }, o.timeout && (this.timeout = setTimeout(function () { timedOut() }, o.timeout)), o.success && (this._successHandler = function () { o.success.apply(o, arguments) }), o.error && this._errorHandlers.push(function () { o.error.apply(o, arguments) }), o.complete && this._completeHandlers.push(function () { o.complete.apply(o, arguments) }), this.request = getRequest.call(this, success, error) } function reqwest(t, e) { return new Reqwest(t, e) } function normalize(t) { return t ? t.replace(/\r?\n/g, "\r\n") : "" } function serial(t, e) { var o, r, n, i, s = t.name, a = t.tagName.toLowerCase(), l = function (t) { t && !t.disabled && e(s, normalize(t.attributes.value && t.attributes.value.specified ? t.value : t.text)) }; if (!t.disabled && s) switch (a) { case "input": /reset|button|image|file/i.test(t.type) || (o = /checkbox/i.test(t.type), r = /radio/i.test(t.type), n = t.value, (!o && !r || t.checked) && e(s, normalize(o && "" === n ? "on" : n))); break; case "textarea": e(s, normalize(t.value)); break; case "select": if ("select-one" === t.type.toLowerCase()) l(t.selectedIndex >= 0 ? t.options[t.selectedIndex] : null); else for (i = 0; t.length && i < t.length; i++)t.options[i].selected && l(t.options[i]) } } function eachFormElement() { var t, e, o = this, r = function (t, e) { var r, n, i; for (r = 0; r < e.length; r++)for (i = t[byTag](e[r]), n = 0; n < i.length; n++)serial(i[n], o) }; for (e = 0; e < arguments.length; e++)t = arguments[e], /input|select|textarea/i.test(t.tagName) && serial(t, o), r(t, ["input", "select", "textarea"]) } function serializeQueryString() { return reqwest.toQueryString(reqwest.serializeArray.apply(null, arguments)) } function serializeHash() { var t = {}; return eachFormElement.apply(function (e, o) { e in t ? (t[e] && !isArray(t[e]) && (t[e] = [t[e]]), t[e].push(o)) : t[e] = o }, arguments), t } function buildParams(t, e, o, r) { var n, i, s, a = /\[\]$/; if (isArray(e)) for (i = 0; e && i < e.length; i++)s = e[i], o || a.test(t) ? r(t, s) : buildParams(t + "[" + ("object" == typeof s ? i : "") + "]", s, o, r); else if (e && "[object Object]" === e.toString()) for (n in e) buildParams(t + "[" + n + "]", e[n], o, r); else r(t, e) } return Reqwest.prototype = { abort: function () { this._aborted = !0, this.request.abort() }, retry: function () { init.call(this, this.o, this.fn) }, then: function (t, e) { return t = t || function () { }, e = e || function () { }, this._fulfilled ? this._responseArgs.resp = t(this._responseArgs.resp) : this._erred ? e(this._responseArgs.resp, this._responseArgs.msg, this._responseArgs.t) : (this._fulfillmentHandlers.push(t), this._errorHandlers.push(e)), this }, always: function (t) { return this._fulfilled || this._erred ? t(this._responseArgs.resp) : this._completeHandlers.push(t), this }, fail: function (t) { return this._erred ? t(this._responseArgs.resp, this._responseArgs.msg, this._responseArgs.t) : this._errorHandlers.push(t), this }, catch: function (t) { return this.fail(t) } }, reqwest.serializeArray = function () { var t = []; return eachFormElement.apply(function (e, o) { t.push({ name: e, value: o }) }, arguments), t }, reqwest.serialize = function () { if (0 === arguments.length) return ""; var t, e = Array.prototype.slice.call(arguments, 0); return (t = e.pop()) && t.nodeType && e.push(t) && (t = null), t && (t = t.type), ("map" == t ? serializeHash : "array" == t ? reqwest.serializeArray : serializeQueryString).apply(null, e) }, reqwest.toQueryString = function (t, e) { var o, r, n = e || !1, i = [], s = encodeURIComponent, a = function (t, e) { e = "function" == typeof e ? e() : null == e ? "" : e, i[i.length] = s(t) + "=" + s(e) }; if (isArray(t)) for (r = 0; t && r < t.length; r++)a(t[r].name, t[r].value); else for (o in t) t.hasOwnProperty(o) && buildParams(o, t[o], n, a); return i.join("&").replace(/%20/g, "+") }, reqwest.getcallbackPrefix = function () { return callbackPrefix }, reqwest.compat = function (t, e) { return t && (t.type && (t.method = t.type) && delete t.type, t.dataType && (t.type = t.dataType), t.jsonpCallback && (t.jsonpCallbackName = t.jsonpCallback) && delete t.jsonpCallback, t.jsonp && (t.jsonpCallback = t.jsonp)), new Reqwest(t, e) }, reqwest.ajaxSetup = function (t) { for (var e in t = t || {}) globalSetupOptions[e] = t[e] }, reqwest }, "undefined" != typeof module && module.exports ? module.exports = definition() : "function" == typeof define && define.amd ? define("reqwest", definition) : context.reqwest = definition(), amdclean.inputfiles = function (t, e, o) { "use strict"; var r = e; o = o; function n(t, e) { var o = {}; if (void 0 === (e = e || [])) for (var r = 0; r < t.length; r++)e[r.toString()] = r; for (var n = 0; n < e.length; n++) { var i = e[n], s = t[n]; o[i] = s } return o } return r.prototype.createInput = function () { throw "not yet implemented" }, r.prototype.createReader = function () { throw "not yet implemented" }, r.prototype.loadBytes = function () { throw "not yet implemented" }, r.prototype.loadJSON = function () { var t = arguments[0], e = arguments[1], r = [], n = "json"; return "string" == typeof arguments[2] && ("jsonp" !== arguments[2] && "json" !== arguments[2] || (n = arguments[2])), o({ url: t, type: n, crossOrigin: !0 }).then(function (t) { for (var o in t) r[o] = t[o]; void 0 !== e && e(t) }), r }, r.prototype.loadStrings = function (t, e) { var o = [], r = new XMLHttpRequest; return r.open("GET", t, !0), r.onreadystatechange = function () { if (4 === r.readyState && (200 === r.status || 0 === r.status)) { var t = r.responseText.match(/[^\r\n]+/g); for (var n in t) o[n] = t[n]; void 0 !== e && e(o) } }, r.send(null), o }, r.prototype.loadTable = function (t) { for (var e = null, i = [], s = !1, a = ",", l = !1, p = 1; p < arguments.length; p++)if ("function" == typeof arguments[p]) e = arguments[p]; else if ("string" == typeof arguments[p]) if (i.push(arguments[p]), "header" === arguments[p] && (s = !0), "csv" === arguments[p]) { if (l) throw new Error("Cannot set multiple separator types."); a = ",", l = !0 } else if ("tsv" === arguments[p]) { if (l) throw new Error("Cannot set multiple separator types."); a = "\t", l = !0 } var h = new r.Table; return o({ url: t, crossOrigin: !0, type: "csv" }).then(function (t) { t = t.responseText; for (var o, i, l = {}, c = [], u = 0, d = null, f = function () { l.currentState = 4, c.push(d), d = null }, y = function () { l.currentState = 0, l.token = "" }, m = function () { d.push(l.token), y() }; ;) { if (null == (o = t[u++])) { if (l.escaped) throw new Error("Unclosed quote in file."); if (d) { m(), f(); break } } if (null === d && (l.escaped = !1, d = [], y()), 0 === l.currentState) { if ('"' === o) { l.escaped = !0, l.currentState = 1; continue } l.currentState = 1 } 1 === l.currentState && l.escaped ? '"' === o ? '"' === t[u] ? (l.token += '"', u++) : (l.escaped = !1, l.currentState = 2) : l.token += o : "\r" === o ? ("\n" === t[u] && u++ , m(), f()) : "\n" === o ? (m(), f()) : o === a ? m() : 1 === l.currentState && (l.token += o) } if (s) h.columns = c.shift(); else for (p = 0; p < c.length; p++)h.columns[p] = p.toString(); for (p = 0; p < c.length; p++)(i = new r.TableRow).arr = c[p], i.obj = n(c[p], h.columns), h.addRow(i); null !== e && e(h) }).fail(function (t, o) { void 0 !== e && e(!1) }), h }, r.prototype.loadXML = function (t, e) { return o({ url: t, type: "xml", crossOrigin: !0 }).then(function (t) { e(t) }), [] }, r.prototype.parseXML = function () { throw "not yet implemented" }, r.prototype.selectFolder = function () { throw "not yet implemented" }, r.prototype.selectInput = function () { throw "not yet implemented" }, r.prototype.httpGet = function () { var t = Array.prototype.slice.call(arguments); t.push("GET"), r.prototype.httpDo.apply(this, t) }, r.prototype.httpPost = function () { var t = Array.prototype.slice.call(arguments); t.push("POST"), r.prototype.httpDo.apply(this, t) }, r.prototype.httpDo = function () { for (var t, e = "GET", r = arguments[0], n = {}, i = "", s = 1; s < arguments.length; s++) { var a = arguments[s]; "string" == typeof a ? "GET" === a || "POST" === a || "PUT" === a ? e = a : i = a : "object" == typeof a ? n = a : "function" == typeof a && (t = a) } "" === i && (i = -1 !== r.indexOf("json") ? "json" : -1 !== r.indexOf("xml") ? "xml" : "text"), o({ url: r, method: e, data: n, type: i, crossOrigin: !0, success: function (e) { void 0 !== t && t("text" === i ? e.response : e) } }) }, r }(0, amdclean.core, amdclean.reqwest), amdclean.inputkeyboard = function (t, e) { "use strict"; var o = amdclean["core"], r = {}; return o.prototype.isKeyPressed = !1, o.prototype.keyIsPressed = !1, o.prototype.key = "", o.prototype.keyCode = 0, o.prototype._onkeydown = function (t) { this._setProperty("isKeyPressed", !0), this._setProperty("keyIsPressed", !0), this._setProperty("keyCode", t.which), r[t.which] = !0; var e = String.fromCharCode(t.which); e || (e = t.which), this._setProperty("key", e); var o = this.keyPressed || window.keyPressed; "function" != typeof o || t.charCode || !1 === o(t) && t.preventDefault() }, o.prototype._onkeyup = function (t) { var e = this.keyReleased || window.keyReleased; this._setProperty("isKeyPressed", !1), this._setProperty("keyIsPressed", !1), r[t.which] = !1; var o = String.fromCharCode(t.which); (o || (o = t.which), this._setProperty("key", o), this._setProperty("keyCode", t.which), "function" == typeof e) && (!1 === e(t) && t.preventDefault()) }, o.prototype._onkeypress = function (t) { this._setProperty("keyCode", t.which), this._setProperty("key", String.fromCharCode(t.which)); var e = this.keyTyped || window.keyTyped; "function" == typeof e && (!1 === e(t) && t.preventDefault()) }, o.prototype._onblur = function (t) { r = {} }, o.prototype.keyIsDown = function (t) { return r[t] }, o }(), amdclean.inputacceleration = function (t, e) { "use strict"; var o = amdclean["core"]; o.prototype.deviceOrientation = void 0, o.prototype.accelerationX = 0, o.prototype.accelerationY = 0, o.prototype.accelerationZ = 0, o.prototype.pAccelerationX = 0, o.prototype.pAccelerationY = 0, o.prototype.pAccelerationZ = 0, o.prototype._updatePAccelerations = function () { this._setProperty("pAccelerationX", this.accelerationX), this._setProperty("pAccelerationY", this.accelerationY), this._setProperty("pAccelerationZ", this.accelerationZ) }; var r = .5; o.prototype.setMoveThreshold = function (t) { "number" == typeof t && (r = t) }; var n = "", i = ""; return o.prototype._ondeviceorientation = function (t) { this._setProperty("accelerationX", t.beta), this._setProperty("accelerationY", t.gamma), this._setProperty("accelerationZ", t.alpha), this._handleMotion() }, o.prototype._ondevicemotion = function (t) { this._setProperty("accelerationX", 2 * t.acceleration.x), this._setProperty("accelerationY", 2 * t.acceleration.y), this._setProperty("accelerationZ", 2 * t.acceleration.z), this._handleMotion() }, o.prototype._onMozOrientation = function (t) { this._setProperty("accelerationX", t.x), this._setProperty("accelerationY", t.y), this._setProperty("accelerationZ", t.z), this._handleMotion() }, o.prototype._handleMotion = function () { 90 === window.orientation || -90 === window.orientation ? this._setProperty("deviceOrientation", "landscape") : 0 === window.orientation ? this._setProperty("deviceOrientation", "portrait") : void 0 === window.orientation && this._setProperty("deviceOrientation", "undefined"); var t = this.onDeviceMove || window.onDeviceMove; "function" == typeof t && (Math.abs(this.accelerationX - this.pAccelerationX) > r || Math.abs(this.accelerationY - this.pAccelerationY) > r || Math.abs(this.accelerationZ - this.pAccelerationZ) > r) && t(); var e = this.onDeviceTurn || window.onDeviceTurn; if ("function" == typeof e) { var o = 0; Math.abs(this.accelerationX) > o && (o = this.accelerationX, i = "x"), Math.abs(this.accelerationY) > o && (o = this.accelerationY, i = "y"), Math.abs(this.accelerationZ) > o && (i = "z"), "" !== n && n !== i && e(i), n = i } }, o }(), amdclean.inputmouse = function (t, e, o) { "use strict"; var r = e; o = o; return r.prototype.mouseX = 0, r.prototype.mouseY = 0, r.prototype.pmouseX = 0, r.prototype.pmouseY = 0, r.prototype.winMouseX = 0, r.prototype.winMouseY = 0, r.prototype.pwinMouseX = 0, r.prototype.pwinMouseY = 0, r.prototype.mouseButton = 0, r.prototype.mouseIsPressed = !1, r.prototype.isMousePressed = !1, r.prototype._updateMouseCoords = function (t) { if ("touchstart" === t.type || "touchmove" === t.type || "touchend" === t.type) this._setProperty("mouseX", this.touchX), this._setProperty("mouseY", this.touchY); else if (null !== this._curElement) { var e = (o = this._curElement.elt, r = t, n = o.getBoundingClientRect(), { x: r.clientX - n.left, y: r.clientY - n.top }); this._setProperty("mouseX", e.x), this._setProperty("mouseY", e.y) } var o, r, n; this._setProperty("winMouseX", t.pageX), this._setProperty("winMouseY", t.pageY) }, r.prototype._updatePMouseCoords = function (t) { this._setProperty("pmouseX", this.mouseX), this._setProperty("pmouseY", this.mouseY), this._setProperty("pwinMouseX", this.winMouseX), this._setProperty("pwinMouseY", this.winMouseY) }, r.prototype._setMouseButton = function (t) { 1 === t.button ? this._setProperty("mouseButton", o.CENTER) : 2 === t.button ? this._setProperty("mouseButton", o.RIGHT) : (this._setProperty("mouseButton", o.LEFT), "touchstart" !== t.type && "touchmove" !== t.type || (this._setProperty("mouseX", this.touchX), this._setProperty("mouseY", this.touchY))) }, r.prototype._onmousemove = function (t) { var e = this._isGlobal ? window : this; this._updateMouseCoords(t), this.isMousePressed ? "function" == typeof e.mouseDragged ? !1 === e.mouseDragged(t) && t.preventDefault() : "function" == typeof e.touchMoved && (!1 === e.touchMoved(t) && t.preventDefault(), this._updateTouchCoords(t)) : "function" == typeof e.mouseMoved && !1 === e.mouseMoved(t) && t.preventDefault() }, r.prototype._onmousedown = function (t) { var e = this._isGlobal ? window : this; this._setProperty("isMousePressed", !0), this._setProperty("mouseIsPressed", !0), this._setMouseButton(t), this._updateMouseCoords(t), "function" == typeof e.mousePressed ? !1 === e.mousePressed(t) && t.preventDefault() : "function" == typeof e.touchStarted && (!1 === e.touchStarted(t) && t.preventDefault(), this._updateTouchCoords(t)) }, r.prototype._onmouseup = function (t) { var e = this._isGlobal ? window : this; this._setProperty("isMousePressed", !1), this._setProperty("mouseIsPressed", !1), "function" == typeof e.mouseReleased ? !1 === e.mouseReleased(t) && t.preventDefault() : "function" == typeof e.touchEnded && (!1 === e.touchEnded(t) && t.preventDefault(), this._updateTouchCoords(t)) }, r.prototype._onclick = function (t) { var e = this._isGlobal ? window : this; "function" == typeof e.mouseClicked && (!1 === e.mouseClicked(t) && t.preventDefault()) }, r.prototype._onmousewheel = r.prototype._onDOMMouseScroll = function (t) { var e = this._isGlobal ? window : this; "function" == typeof e.mouseWheel && (!1 === e.mouseWheel(t) && t.preventDefault()) }, r }(0, amdclean.core, amdclean.constants), amdclean.inputtime_date = function (t, e) { "use strict"; var o = amdclean["core"]; return o.prototype.day = function () { return (new Date).getDate() }, o.prototype.hour = function () { return (new Date).getHours() }, o.prototype.minute = function () { return (new Date).getMinutes() }, o.prototype.millis = function () { return (new Date).getTime() - this._startTime }, o.prototype.month = function () { return (new Date).getMonth() + 1 }, o.prototype.second = function () { return (new Date).getSeconds() }, o.prototype.year = function () { return (new Date).getFullYear() }, o }(), amdclean.inputtouch = function (t, e) { "use strict"; var o = amdclean["core"]; function r(t, e, o) { o = o || 0; var r = t.getBoundingClientRect(), n = e.touches[o] || e.changedTouches[o]; return { x: n.clientX - r.left, y: n.clientY - r.top } } return o.prototype.touchX = 0, o.prototype.touchY = 0, o.prototype.ptouchX = 0, o.prototype.ptouchY = 0, o.prototype.touches = [], o.prototype.touchIsDown = !1, o.prototype._updateTouchCoords = function (t) { if ("mousedown" === t.type || "mousemove" === t.type || "mouseup" === t.type) this._setProperty("touchX", this.mouseX), this._setProperty("touchY", this.mouseY); else { var e = r(this._curElement.elt, t, 0); this._setProperty("touchX", e.x), this._setProperty("touchY", e.y); for (var o = [], n = 0; n < t.touches.length; n++) { var i = r(this._curElement.elt, t, n); o[n] = { x: i.x, y: i.y } } this._setProperty("touches", o) } }, o.prototype._updatePTouchCoords = function () { this._setProperty("ptouchX", this.touchX), this._setProperty("ptouchY", this.touchY) }, o.prototype._ontouchstart = function (t) { var e = this._isGlobal ? window : this; this._updateTouchCoords(t), this._setProperty("touchIsDown", !0), "function" == typeof e.touchStarted ? !1 === e.touchStarted(t) && t.preventDefault() : "function" == typeof e.mousePressed && !1 === e.mousePressed(t) && t.preventDefault() }, o.prototype._ontouchmove = function (t) { var e = this._isGlobal ? window : this; this._updateTouchCoords(t), "function" == typeof e.touchMoved ? !1 === e.touchMoved(t) && t.preventDefault() : "function" == typeof e.mouseDragged && (!1 === e.mouseDragged(t) && t.preventDefault(), this._updateMouseCoords(t)) }, o.prototype._ontouchend = function (t) { this._updateTouchCoords(t), 0 === this.touches.length && this._setProperty("touchIsDown", !1); var e = this._isGlobal ? window : this; "function" == typeof e.touchEnded ? !1 === e.touchEnded(t) && t.preventDefault() : "function" == typeof e.mouseReleased && (!1 === e.mouseReleased(t) && t.preventDefault(), this._updateMouseCoords(t)) }, o }(), amdclean.mathmath = function (t, e) { "use strict"; var o = amdclean["core"]; return o.prototype.createVector = function (t, e, r) { return this instanceof o ? new o.Vector(this, arguments) : new o.Vector(t, e, r) }, o }(), amdclean.mathcalculation = function (t, e) { "use strict"; var o = amdclean["core"]; return o.prototype.abs = Math.abs, o.prototype.ceil = Math.ceil, o.prototype.constrain = function (t, e, o) { return Math.max(Math.min(t, o), e) }, o.prototype.dist = function (t, e, o, r) { return Math.sqrt((o - t) * (o - t) + (r - e) * (r - e)) }, o.prototype.exp = Math.exp, o.prototype.floor = Math.floor, o.prototype.lerp = function (t, e, o) { return o * (e - t) + t }, o.prototype.log = Math.log, o.prototype.mag = function (t, e) { return Math.sqrt(t * t + e * e) }, o.prototype.map = function (t, e, o, r, n) { return (t - e) / (o - e) * (n - r) + r }, o.prototype.max = function () { return arguments[0] instanceof Array ? Math.max.apply(null, arguments[0]) : Math.max.apply(null, arguments) }, o.prototype.min = function () { return arguments[0] instanceof Array ? Math.min.apply(null, arguments[0]) : Math.min.apply(null, arguments) }, o.prototype.norm = function (t, e, o) { return this.map(t, e, o, 0, 1) }, o.prototype.pow = Math.pow, o.prototype.round = Math.round, o.prototype.sq = function (t) { return t * t }, o.prototype.sqrt = Math.sqrt, o }(), amdclean.mathrandom = function (t, e) { "use strict"; var o, r, n, i, s = amdclean["core"], a = !1, l = (n = 4294967296, { setSeed: function (t) { r = o = (null == t ? Math.random() * n : t) >>> 0 }, getSeed: function () { return o }, rand: function () { return (r = (1664525 * r + 1013904223) % n) / n } }); s.prototype.randomSeed = function (t) { l.setSeed(t), a = !0 }, s.prototype.random = function (t, e) { var o; if (o = a ? l.rand() : Math.random(), 0 === arguments.length) return o; if (1 === arguments.length) return o * t; if (t > e) { var r = t; t = e, e = r } return o * (e - t) + t }; var p = !1; return s.prototype.randomGaussian = function (t, e) { var o, r, n, s; if (p) o = i, p = !1; else { do { s = (r = this.random(2) - 1) * r + (n = this.random(2) - 1) * n } while (s >= 1); o = r * (s = Math.sqrt(-2 * Math.log(s) / s)), i = n * s, p = !0 } return o * (e || 1) + (t || 0) }, s }(), amdclean.mathnoise = function (t, e) { "use strict"; for (var o = amdclean["core"], r = 4, n = .5, i = Math.floor(720), s = new Array(i), a = new Array(i), l = Math.PI / 180, p = 0; p < i; p++)s[p] = Math.sin(p * l * .5), a[p] = Math.cos(p * l * .5); var h, c = i; return c >>= 1, o.prototype.noise = function (t, e, o) { if (e = e || 0, o = o || 0, null == h) { h = new Array(4096); for (var s = 0; s < 4096; s++)h[s] = Math.random() } t < 0 && (t = -t), e < 0 && (e = -e), o < 0 && (o = -o); for (var l, p, u, d, f, y = Math.floor(t), m = Math.floor(e), g = Math.floor(o), w = t - y, v = e - m, _ = o - g, x = 0, b = .5, C = function (t) { return .5 * (1 - a[Math.floor(t * c) % i]) }, T = 0; T < r; T++) { var R = y + (m << 4) + (g << 8); l = C(w), p = C(v), u = h[4095 & R], u += l * (h[R + 1 & 4095] - u), d = h[R + 16 & 4095], u += p * ((d += l * (h[R + 16 + 1 & 4095] - d)) - u), d = h[4095 & (R += 256)], d += l * (h[R + 1 & 4095] - d), f = h[R + 16 & 4095], d += p * ((f += l * (h[R + 16 + 1 & 4095] - f)) - d), x += (u += C(_) * (d - u)) * b, b *= n, y <<= 1, m <<= 1, g <<= 1, (w *= 2) >= 1 && (y++ , w--), (v *= 2) >= 1 && (m++ , v--), (_ *= 2) >= 1 && (g++ , _--) } return x }, o.prototype.noiseDetail = function (t, e) { t > 0 && (r = t), e > 0 && (n = e) }, o.prototype.noiseSeed = function (t) { var e = function () { var t, e, o = 4294967296; return { setSeed: function (r) { e = t = (null == r ? Math.random() * o : r) >>> 0 }, getSeed: function () { return t }, rand: function () { return (e = (1664525 * e + 1013904223) % o) / o } } }(); e.setSeed(t), h = new Array(4096); for (var o = 0; o < 4096; o++)h[o] = e.rand() }, o }(), amdclean.mathtrigonometry = function (t, e, o, r) { "use strict"; var n = e, i = o; r = r; return n.prototype._angleMode = r.RADIANS, n.prototype.acos = function (t) { return this._angleMode === r.RADIANS ? Math.acos(t) : i.radiansToDegrees(Math.acos(t)) }, n.prototype.asin = function (t) { return this._angleMode === r.RADIANS ? Math.asin(t) : i.radiansToDegrees(Math.asin(t)) }, n.prototype.atan = function (t) { return this._angleMode === r.RADIANS ? Math.atan(t) : i.radiansToDegrees(Math.atan(t)) }, n.prototype.atan2 = function (t, e) { return this._angleMode === r.RADIANS ? Math.atan2(t, e) : i.radiansToDegrees(Math.atan2(t, e)) }, n.prototype.cos = function (t) { return this._angleMode === r.RADIANS ? Math.cos(t) : Math.cos(this.radians(t)) }, n.prototype.sin = function (t) { return this._angleMode === r.RADIANS ? Math.sin(t) : Math.sin(this.radians(t)) }, n.prototype.tan = function (t) { return this._angleMode === r.RADIANS ? Math.tan(t) : Math.tan(this.radians(t)) }, n.prototype.degrees = function (t) { return i.radiansToDegrees(t) }, n.prototype.radians = function (t) { return i.degreesToRadians(t) }, n.prototype.angleMode = function (t) { t !== r.DEGREES && t !== r.RADIANS || (this._angleMode = t) }, n }(0, amdclean.core, amdclean.polargeometry, amdclean.constants), amdclean.outputfiles = function (t, e) { "use strict"; var o = amdclean["core"]; window.URL = window.URL || window.webkitURL, o.prototype._pWriters = [], o.prototype.beginRaw = function () { throw "not yet implemented" }, o.prototype.beginRecord = function () { throw "not yet implemented" }, o.prototype.createOutput = function () { throw "not yet implemented" }, o.prototype.createWriter = function (t, e) { var r; for (var n in o.prototype._pWriters) if (o.prototype._pWriters[n].name === t) return r = new o.PrintWriter(t + window.millis(), e), o.prototype._pWriters.push(r), r; return r = new o.PrintWriter(t, e), o.prototype._pWriters.push(r), r }, o.prototype.endRaw = function () { throw "not yet implemented" }, o.prototype.endRecord = function () { throw "not yet implemented" }, o.PrintWriter = function (t, e) { var r = this; this.name = t, this.content = "", this.print = function (t) { this.content += t }, this.println = function (t) { this.content += t + "\n" }, this.flush = function () { this.content = "" }, this.close = function () { var n = []; for (var i in n.push(this.content), o.prototype.writeFile(n, t, e), o.prototype._pWriters) o.prototype._pWriters[i].name === this.name && o.prototype._pWriters.splice(i, 1); r.flush(), r = {} } }, o.prototype.saveBytes = function () { throw "not yet implemented" }, o.prototype.save = function (t, e, r) { var i = arguments, s = this._curElement.elt; if (0 !== i.length) if (i[0] instanceof o.Graphics) o.prototype.saveCanvas(i[0].elt, i[1], i[2]); else if (1 === i.length && "string" == typeof i[0]) o.prototype.saveCanvas(s, i[0]); else switch (n(i[1], i[2])[1]) { case "json": return void o.prototype.saveJSON(i[0], i[1], i[2]); case "txt": return void o.prototype.saveStrings(i[0], i[1], i[2]); default: i[0] instanceof Array ? o.prototype.saveStrings(i[0], i[1], i[2]) : i[0] instanceof o.Table ? o.prototype.saveTable(i[0], i[1], i[2], i[3]) : i[0] instanceof o.Image ? o.prototype.saveCanvas(i[0].canvas, i[1]) : i[0] instanceof o.SoundFile && o.prototype.saveSound(i[0], i[1], i[2], i[3]) } else o.prototype.saveCanvas(s) }, o.prototype.saveJSON = function (t, e, o) { var r; r = o ? JSON.stringify(t) : JSON.stringify(t, void 0, 2), console.log(r), this.saveStrings(r.split("\n"), e, "json") }, o.prototype.saveJSONObject = o.prototype.saveJSON, o.prototype.saveJSONArray = o.prototype.saveJSON, o.prototype.saveStream = function () { throw "not yet implemented" }, o.prototype.saveStrings = function (t, e, o) { var r = o || "txt", n = this.createWriter(e, r); for (var i in t) i < t.length - 1 ? n.println(t[i]) : n.print(t[i]); n.close(), n.flush() }, o.prototype.saveXML = function () { throw "not yet implemented" }, o.prototype.selectOutput = function () { throw "not yet implemented" }, o.prototype.saveTable = function (t, e, o) { var n = this.createWriter(e, o), i = t.columns, s = ","; if ("tsv" === o && (s = "\t"), "html" !== o) { if ("0" !== i[0]) for (var a = 0; a < i.length; a++)a < i.length - 1 ? n.print(i[a] + s) : n.println(i[a]); for (var l = 0; l < t.rows.length; l++) { var p; for (p = 0; p < t.rows[l].arr.length; p++)p < t.rows[l].arr.length - 1 ? n.print(t.rows[l].arr[p] + s) : l < t.rows.length - 1 ? n.println(t.rows[l].arr[p]) : n.print(t.rows[l].arr[p]) } } else { n.println("<html>"), n.println("<head>"); if ('="text/html;charset=utf-8" />', n.println('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'), n.println("</head>"), n.println("<body>"), n.println("  <table>"), "0" !== i[0]) { n.println("    <tr>"); for (var h = 0; h < i.length; h++) { var c = r(i[h]); n.println("      <td>" + c), n.println("      </td>") } n.println("    </tr>") } for (var u = 0; u < t.rows.length; u++) { n.println("    <tr>"); for (var d = 0; d < t.columns.length; d++) { var f = t.rows[u].getString(d), y = r(f); n.println("      <td>" + y), n.println("      </td>") } n.println("    </tr>") } n.println("  </table>"), n.println("</body>"), n.print("</html>") } n.close(), n.flush() }; var r = function (t) { return t.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;") }; function n(t, e) { e && !0 !== e && "true" !== e || (e = ""), t || (t = "untitled"); var o = ""; return t && t.indexOf(".") > -1 && (o = t.split(".").pop()), e && o !== e && (t = t + "." + (o = e)), [t, o] } function i(t) { document.body.removeChild(t.target) } return o.prototype.writeFile = function (t, e, r) { var n = "application/octet-stream"; o.prototype._isSafari() && (n = "text/plain"); var i = new Blob(t, { type: n }), s = window.URL.createObjectURL(i); o.prototype.downloadFile(s, e, r) }, o.prototype.downloadFile = function (t, e, r) { var s = n(e, r), a = s[0], l = s[1], p = document.createElement("a"); if (p.href = t, p.download = a, p.onclick = i, p.style.display = "none", document.body.appendChild(p), o.prototype._isSafari()) { var h = "Hello, Safari user! To download this file...\n"; h += "1. Go to File --\x3e Save As.\n", h += '2. Choose "Page Source" as the Format.\n', h += '3. Name it with this extension: ."' + l + '"', alert(h) } p.click(), t = null }, o.prototype._checkFileExtension = n, o.prototype._isSafari = function () { return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor") > 0 }, o }(), amdclean.outputimage = function (t, e) { "use strict"; var o = amdclean["core"], r = []; return o.prototype.saveCanvas = function (t, e, r) { var n; if (r || "" === (r = o.prototype._checkFileExtension(e, r)[1]) && (r = "png"), t ? n = t : this._curElement && this._curElement.elt && (n = this._curElement.elt), o.prototype._isSafari()) { "Now capturing a screenshot...\n", "To save this image,\n", "go to File --\x3e Save As.\n", alert("Hello, Safari user!\nNow capturing a screenshot...\nTo save this image,\ngo to File --\x3e Save As.\n"), window.location.href = n.toDataURL() } else { var i; if (void 0 === r) r = "png", i = "image/png"; else switch (r) { case "png": i = "image/png"; break; case "jpeg": case "jpg": i = "image/jpeg"; break; default: i = "image/png" }var s = n.toDataURL(i); s = s.replace(i, "image/octet-stream"), o.prototype.downloadFile(s, e, r) } }, o.prototype.saveFrames = function (t, e, n, i, s) { var a = n || 3; a = o.prototype.constrain(a, 0, 15), a *= 1e3; var l = i || 15; l = o.prototype.constrain(l, 0, 22); var p = 0, h = o.prototype._makeFrame, c = this._curElement.elt, u = setInterval(function () { h(t + p, e, c), p++ }, 1e3 / l); setTimeout(function () { if (clearInterval(u), s) s(r); else for (var t = 0; t < r.length; t++) { var e = r[t]; o.prototype.downloadFile(e.imageData, e.filename, e.ext) } r = [] }, a + .01) }, o.prototype._makeFrame = function (t, e, o) { var n, i; if (n = this ? this._curElement.elt : o, e) switch (e.toLowerCase()) { case "png": i = "image/png"; break; case "jpeg": case "jpg": i = "image/jpeg"; break; default: i = "image/png" } else e = "png", i = "image/png"; var s = n.toDataURL(i); s = s.replace(i, "image/octet-stream"); var a = {}; a.imageData = s, a.filename = t, a.ext = e, r.push(a) }, o }(), amdclean.outputtext_area = function (t, e) { "use strict"; var o = amdclean["core"]; return window.console && console.log ? o.prototype.print = console.log.bind(console) : o.prototype.print = function () { }, o.prototype.println = o.prototype.print, o }(), amdclean.renderingrendering = function (t, e, o) { var r = e; o = o; return r.prototype.createCanvas = function (t, e, o) { var n; return o ? (n = document.createElement("canvas")).id = "defaultCanvas" : n = this.canvas, this._setupDone || (n.className += " p5_hidden", n.style.visibility = "hidden"), this._userNode ? this._userNode.appendChild(n) : document.body.appendChild(n), this._defaultGraphics || (this._defaultGraphics = new r.Graphics(n, this, !0), this._elements.push(this._defaultGraphics)), this._defaultGraphics.resize(t, e), this._defaultGraphics._applyDefaults(), this._defaultGraphics }, r.prototype.resizeCanvas = function (t, e, o) { this._defaultGraphics && (this._defaultGraphics.resize(t, e), this._defaultGraphics._applyDefaults(), o || this.redraw()) }, r.prototype.noCanvas = function () { this.canvas && this.canvas.parentNode.removeChild(this.canvas) }, r.prototype.createGraphics = function (t, e) { var o = document.createElement("canvas"); (this._userNode || document.body).appendChild(o); var n = new r.Graphics(o, this, !1); for (var i in this._elements.push(n), r.prototype) n.hasOwnProperty(i) || ("function" == typeof r.prototype[i] ? n[i] = r.prototype[i].bind(n) : n[i] = r.prototype[i]); return n.resize(t, e), n._applyDefaults(), n }, r.prototype.blendMode = function (t) { if (t !== o.BLEND && t !== o.DARKEST && t !== o.LIGHTEST && t !== o.DIFFERENCE && t !== o.MULTIPLY && t !== o.EXCLUSION && t !== o.SCREEN && t !== o.REPLACE && t !== o.OVERLAY && t !== o.HARD_LIGHT && t !== o.SOFT_LIGHT && t !== o.DODGE && t !== o.BURN && t !== o.ADD && t !== o.NORMAL) throw new Error("Mode " + t + " not recognized."); this.drawingContext.globalCompositeOperation = t }, r }(0, amdclean.core, amdclean.constants), amdclean.shape2d_primitives = function (t, e, o, r) { "use strict"; var n = e, i = (o = o, r = r, 1e-5); function s(t, e, o) { var r = (o - e) / 2, n = t * Math.cos(r), i = t * Math.sin(r), s = n, a = -i, l = .5522847498 * Math.tan(r), p = s + l * i, h = a + l * n, c = p, u = -h, d = r + e, f = Math.cos(d), y = Math.sin(d); return { x1: t * Math.cos(e), y1: t * Math.sin(e), x2: p * f - h * y, y2: p * y + h * f, x3: c * f - u * y, y3: c * y + u * f, x4: t * Math.cos(o), y4: t * Math.sin(o) } } return n.prototype.arc = function (t, e, n, a, l, p, h) { if (this._doStroke || this._doFill) { this._angleMode === r.DEGREES && (l = this.radians(l), p = this.radians(p)); var c = this.drawingContext, u = o.arcModeAdjust(t, e, n, a, this._ellipseMode), d = function (t, e, o) { for (var r = 2 * Math.PI, n = [], a = Math.PI / 2, l = e < o ? 1 : -1, p = e, h = Math.min(r, Math.abs(o - e)); h > i;) { var c = p + l * Math.min(h, a); n.push(s(t, p, c)), h -= Math.abs(c - p), p = c } return n }(1, l, p), f = u.w / 2, y = u.h / 2; return c.beginPath(), d.forEach(function (t, e) { 0 === e && c.moveTo(u.x + t.x1 * f, u.y + t.y1 * y), c.bezierCurveTo(u.x + t.x2 * f, u.y + t.y2 * y, u.x + t.x3 * f, u.y + t.y3 * y, u.x + t.x4 * f, u.y + t.y4 * y) }), this._doFill && (h !== r.PIE && null != h || c.lineTo(u.x, u.y), c.closePath(), c.fill(), this._doStroke && (h === r.CHORD || h === r.PIE)) ? (c.stroke(), this) : (this._doStroke && (h !== r.OPEN && null != h || (c.beginPath(), d.forEach(function (t, e) { 0 === e && c.moveTo(u.x + t.x1 * f, u.y + t.y1 * y), c.bezierCurveTo(u.x + t.x2 * f, u.y + t.y2 * y, u.x + t.x3 * f, u.y + t.y3 * y, u.x + t.x4 * f, u.y + t.y4 * y) }), c.stroke())), this) } }, n.prototype.ellipse = function (t, e, r, n) { if (this._doStroke || this._doFill) { r = Math.abs(r), n = Math.abs(n); var i = this.drawingContext, s = o.modeAdjust(t, e, r, n, this._ellipseMode); if (i.beginPath(), r === n) i.arc(s.x + s.w / 2, s.y + s.w / 2, s.w / 2, 0, 2 * Math.PI, !1); else { var a = s.w / 2 * .5522848, l = s.h / 2 * .5522848, p = s.x + s.w, h = s.y + s.h, c = s.x + s.w / 2, u = s.y + s.h / 2; i.moveTo(s.x, u), i.bezierCurveTo(s.x, u - l, c - a, s.y, c, s.y), i.bezierCurveTo(c + a, s.y, p, u - l, p, u), i.bezierCurveTo(p, u + l, c + a, h, c, h), i.bezierCurveTo(c - a, h, s.x, u + l, s.x, u), i.closePath() } return this._doFill && i.fill(), this._doStroke && i.stroke(), this } }, n.prototype.line = function (t, e, o, r) { if (this._doStroke) { var n = this.drawingContext; if ("rgba(0,0,0,0)" !== n.strokeStyle) return n.beginPath(), n.moveTo(t, e), n.lineTo(o, r), n.stroke(), this } }, n.prototype.point = function (t, e) { if (this._doStroke) { var o = this.drawingContext, n = o.strokeStyle, i = o.fillStyle; if ("rgba(0,0,0,0)" !== n) return t = Math.round(t), e = Math.round(e), o.fillStyle = n, o.lineWidth > 1 ? (o.beginPath(), o.arc(t, e, o.lineWidth / 2, 0, r.TWO_PI, !1), o.fill()) : o.fillRect(t, e, 1, 1), o.fillStyle = i, this } }, n.prototype.quad = function (t, e, o, r, n, i, s, a) { if (this._doStroke || this._doFill) { var l = this.drawingContext; return l.beginPath(), l.moveTo(t, e), l.lineTo(o, r), l.lineTo(n, i), l.lineTo(s, a), l.closePath(), this._doFill && l.fill(), this._doStroke && l.stroke(), this } }, n.prototype.rect = function (t, e, r, n, i, s, a, l) { if (this._doStroke || this._doFill) { var p = o.modeAdjust(t, e, r, n, this._rectMode), h = this.drawingContext; if (this._doStroke && h.lineWidth % 2 == 1 && h.translate(.5, .5), h.beginPath(), void 0 === i) h.rect(p.x, p.y, p.w, p.h); else { void 0 === s && (s = i), void 0 === a && (a = s), void 0 === l && (l = a); var c = p.x, u = p.y, d = p.w, f = p.h, y = d / 2, m = f / 2; d < 2 * i && (i = y), f < 2 * i && (i = m), d < 2 * s && (s = y), f < 2 * s && (s = m), d < 2 * a && (a = y), f < 2 * a && (a = m), d < 2 * l && (l = y), f < 2 * l && (l = m), h.beginPath(), h.moveTo(c + i, u), h.arcTo(c + d, u, c + d, u + f, s), h.arcTo(c + d, u + f, c, u + f, a), h.arcTo(c, u + f, c, u, l), h.arcTo(c, u, c + d, u, i), h.closePath() } return this._doFill && h.fill(), this._doStroke && h.stroke(), this._doStroke && h.lineWidth % 2 == 1 && h.translate(-.5, -.5), this } }, n.prototype.triangle = function (t, e, o, r, n, i) { if (this._doStroke || this._doFill) { var s = this.drawingContext; return s.beginPath(), s.moveTo(t, e), s.lineTo(o, r), s.lineTo(n, i), s.closePath(), this._doFill && s.fill(), this._doStroke && s.stroke(), this } }, n }(0, amdclean.core, amdclean.canvas, amdclean.constants), amdclean.shapeattributes = function (t, e, o) { "use strict"; var r = e; o = o; return r.prototype._rectMode = o.CORNER, r.prototype._ellipseMode = o.CENTER, r.prototype.ellipseMode = function (t) { return t !== o.CORNER && t !== o.CORNERS && t !== o.RADIUS && t !== o.CENTER || (this._ellipseMode = t), this }, r.prototype.noSmooth = function () { return this.drawingContext.mozImageSmoothingEnabled = !1, this.drawingContext.webkitImageSmoothingEnabled = !1, this }, r.prototype.rectMode = function (t) { return t !== o.CORNER && t !== o.CORNERS && t !== o.RADIUS && t !== o.CENTER || (this._rectMode = t), this }, r.prototype.smooth = function () { return this.drawingContext.mozImageSmoothingEnabled = !0, this.drawingContext.webkitImageSmoothingEnabled = !0, this }, r.prototype.strokeCap = function (t) { return t !== o.ROUND && t !== o.SQUARE && t !== o.PROJECT || (this.drawingContext.lineCap = t), this }, r.prototype.strokeJoin = function (t) { return t !== o.ROUND && t !== o.BEVEL && t !== o.MITER || (this.drawingContext.lineJoin = t), this }, r.prototype.strokeWeight = function (t) { return this.drawingContext.lineWidth = void 0 === t || 0 === t ? 1e-4 : t, this }, r }(0, amdclean.core, amdclean.constants), amdclean.shapecurves = function (t, e) { "use strict"; var o = amdclean["core"]; return o.prototype._curveTightness = 0, o.prototype.bezier = function (t, e, o, r, n, i, s, a) { if (this._doStroke) return this.beginShape(), this.vertex(t, e), this.bezierVertex(o, r, n, i, s, a), this.endShape(), this.stroke(), this }, o.prototype.bezierDetail = function (t) { return t, this }, o.prototype.bezierPoint = function (t, e, o, r, n) { var i = 1 - n; return Math.pow(i, 3) * t + 3 * Math.pow(i, 2) * n * e + 3 * i * Math.pow(n, 2) * o + Math.pow(n, 3) * r }, o.prototype.bezierTangent = function (t, e, o, r, n) { var i = 1 - n; return 3 * r * Math.pow(n, 2) - 3 * o * Math.pow(n, 2) + 6 * o * i * n - 6 * e * i * n + 3 * e * Math.pow(i, 2) - 3 * t * Math.pow(i, 2) }, o.prototype.curve = function (t, e, o, r, n, i, s, a) { if (this._doStroke) return this.beginShape(), this.curveVertex(t, e), this.curveVertex(o, r), this.curveVertex(n, i), this.curveVertex(s, a), this.endShape(), this.stroke(), this }, o.prototype.curveDetail = function (t) { return t, this }, o.prototype.curveTightness = function (t) { this._setProperty("_curveTightness", t) }, o.prototype.curvePoint = function (t, e, o, r, n) { var i = n * n * n, s = n * n; return t * (-.5 * i + s - .5 * n) + e * (1.5 * i - 2.5 * s + 1) + o * (-1.5 * i + 2 * s + .5 * n) + r * (.5 * i - .5 * s) }, o.prototype.curveTangent = function (t, e, o, r, n) { var i = n * n; return t * (-3 * i / 2 + 2 * n - .5) + e * (9 * i / 2 - 5 * n) + o * (-9 * i / 2 + 4 * n + .5) + r * (3 * i / 2 - n) }, o }(), amdclean.shapevertex = function (t, e, o) { "use strict"; var r = e, n = (o = o, null), i = [], s = [], a = !1, l = !1, p = !1, h = !1; return r.prototype._doFillStrokeClose = function () { this._doFill && this.drawingContext.fill(), this._doStroke && this.drawingContext.stroke(), this.drawingContext.closePath() }, r.prototype.beginContour = function () { return s = [], h = !0, this }, r.prototype.beginShape = function (t) { return n = t === o.POINTS || t === o.LINES || t === o.TRIANGLES || t === o.TRIANGLE_FAN || t === o.TRIANGLE_STRIP || t === o.QUADS || t === o.QUAD_STRIP ? t : null, i = [], s = [], this }, r.prototype.bezierVertex = function (t, e, o, r, n, l) { if (0 === i.length) throw "vertex() must be used once before calling bezierVertex()"; a = !0; for (var p = [], c = 0; c < arguments.length; c++)p[c] = arguments[c]; return p.isVert = !1, h ? s.push(p) : i.push(p), this }, r.prototype.curveVertex = function (t, e) { return l = !0, this.vertex(t, e), this }, r.prototype.endContour = function () { var t = s[0].slice(); t.isVert = s[0].isVert, t.moveTo = !1, s.push(t), i.push(i[0]); for (var e = 0; e < s.length; e++)i.push(s[e]); return this }, r.prototype.endShape = function (t) { if (0 === i.length) return this; if (!this._doStroke && !this._doFill) return this; var e, r, s, c = t === o.CLOSE; c && !h && i.push(i[0]); var u = i.length; if (!l || n !== o.POLYGON && null !== n) if (!a || n !== o.POLYGON && null !== n) if (!p || n !== o.POLYGON && null !== n) if (n === o.POINTS) for (r = 0; r < u; r++)e = i[r], this._doStroke && this.stroke(e[6]), this.point(e[0], e[1]); else if (n === o.LINES) for (r = 0; r + 1 < u; r += 2)e = i[r], this._doStroke && this.stroke(i[r + 1][6]), this.line(e[0], e[1], i[r + 1][0], i[r + 1][1]); else if (n === o.TRIANGLES) for (r = 0; r + 2 < u; r += 3)e = i[r], this.drawingContext.beginPath(), this.drawingContext.moveTo(e[0], e[1]), this.drawingContext.lineTo(i[r + 1][0], i[r + 1][1]), this.drawingContext.lineTo(i[r + 2][0], i[r + 2][1]), this.drawingContext.lineTo(e[0], e[1]), this._doFill && (this.fill(i[r + 2][5]), this.drawingContext.fill()), this._doStroke && (this.stroke(i[r + 2][6]), this.drawingContext.stroke()), this.drawingContext.closePath(); else if (n === o.TRIANGLE_STRIP) for (r = 0; r + 1 < u; r++)e = i[r], this.drawingContext.beginPath(), this.drawingContext.moveTo(i[r + 1][0], i[r + 1][1]), this.drawingContext.lineTo(e[0], e[1]), this._doStroke && this.stroke(i[r + 1][6]), this._doFill && this.fill(i[r + 1][5]), r + 2 < u && (this.drawingContext.lineTo(i[r + 2][0], i[r + 2][1]), this._doStroke && this.stroke(i[r + 2][6]), this._doFill && this.fill(i[r + 2][5])), this._doFillStrokeClose(); else if (n === o.TRIANGLE_FAN) { if (u > 2) for (this.drawingContext.beginPath(), this.drawingContext.moveTo(i[0][0], i[0][1]), this.drawingContext.lineTo(i[1][0], i[1][1]), this.drawingContext.lineTo(i[2][0], i[2][1]), this._doFill && this.fill(i[2][5]), this._doStroke && this.stroke(i[2][6]), this._doFillStrokeClose(), r = 3; r < u; r++)e = i[r], this.drawingContext.beginPath(), this.drawingContext.moveTo(i[0][0], i[0][1]), this.drawingContext.lineTo(i[r - 1][0], i[r - 1][1]), this.drawingContext.lineTo(e[0], e[1]), this._doFill && this.fill(e[5]), this._doStroke && this.stroke(e[6]), this._doFillStrokeClose() } else if (n === o.QUADS) for (r = 0; r + 3 < u; r += 4) { for (e = i[r], this.drawingContext.beginPath(), this.drawingContext.moveTo(e[0], e[1]), s = 1; s < 4; s++)this.drawingContext.lineTo(i[r + s][0], i[r + s][1]); this.drawingContext.lineTo(e[0], e[1]), this._doFill && this.fill(i[r + 3][5]), this._doStroke && this.stroke(i[r + 3][6]), this._doFillStrokeClose() } else if (n === o.QUAD_STRIP) { if (u > 3) for (r = 0; r + 1 < u; r += 2)e = i[r], this.drawingContext.beginPath(), r + 3 < u ? (this.drawingContext.moveTo(i[r + 2][0], i[r + 2][1]), this.drawingContext.lineTo(e[0], e[1]), this.drawingContext.lineTo(i[r + 1][0], i[r + 1][1]), this.drawingContext.lineTo(i[r + 3][0], i[r + 3][1]), this._doFill && this.fill(i[r + 3][5]), this._doStroke && this.stroke(i[r + 3][6])) : (this.drawingContext.moveTo(e[0], e[1]), this.drawingContext.lineTo(i[r + 1][0], i[r + 1][1])), this._doFillStrokeClose() } else { for (this.drawingContext.beginPath(), this.drawingContext.moveTo(i[0][0], i[0][1]), r = 1; r < u; r++)(e = i[r]).isVert && (e.moveTo ? this.drawingContext.moveTo(e[0], e[1]) : this.drawingContext.lineTo(e[0], e[1])); this._doFillStrokeClose() } else { for (this.drawingContext.beginPath(), r = 0; r < u; r++)i[r].isVert ? i[r].moveTo ? this.drawingContext.moveTo([0], i[r][1]) : this.drawingContext.lineTo(i[r][0], i[r][1]) : this.drawingContext.quadraticCurveTo(i[r][0], i[r][1], i[r][2], i[r][3]); this._doFillStrokeClose() } else { for (this.drawingContext.beginPath(), r = 0; r < u; r++)i[r].isVert ? i[r].moveTo ? this.drawingContext.moveTo(i[r][0], i[r][1]) : this.drawingContext.lineTo(i[r][0], i[r][1]) : this.drawingContext.bezierCurveTo(i[r][0], i[r][1], i[r][2], i[r][3], i[r][4], i[r][5]); this._doFillStrokeClose() } else if (u > 3) { var d = [], f = 1 - this._curveTightness; for (this.drawingContext.beginPath(), this.drawingContext.moveTo(i[1][0], i[1][1]), r = 1; r + 2 < u; r++)e = i[r], d[0] = [e[0], e[1]], d[1] = [e[0] + (f * i[r + 1][0] - f * i[r - 1][0]) / 6, e[1] + (f * i[r + 1][1] - f * i[r - 1][1]) / 6], d[2] = [i[r + 1][0] + (f * i[r][0] - f * i[r + 2][0]) / 6, i[r + 1][1] + (f * i[r][1] - f * i[r + 2][1]) / 6], d[3] = [i[r + 1][0], i[r + 1][1]], this.drawingContext.bezierCurveTo(d[1][0], d[1][1], d[2][0], d[2][1], d[3][0], d[3][1]); c && this.drawingContext.lineTo(i[r + 1][0], i[r + 1][1]), this._doFillStrokeClose() } return l = !1, a = !1, p = !1, h = !1, c && i.pop(), this }, r.prototype.quadraticVertex = function (t, e, r, n) { if (this._contourInited) { var a = {}; return a.x = t, a.y = e, a.x3 = r, a.y3 = n, a.type = o.QUADRATIC, this._contourVertices.push(a), this } if (!(i.length > 0)) throw "vertex() must be used once before calling quadraticVertex()"; p = !0; for (var l = [], c = 0; c < arguments.length; c++)l[c] = arguments[c]; return l.isVert = !1, h ? s.push(l) : i.push(l), this }, r.prototype.vertex = function (t, e, o) { var r = []; return r.isVert = !0, r[0] = t, r[1] = e, r[2] = 0, r[3] = 0, r[4] = 0, r[5] = this.drawingContext.fillStyle, r[6] = this.drawingContext.strokeStyle, o && (r.moveTo = o), h ? (0 === s.length && (r.moveTo = !0), s.push(r)) : i.push(r), this }, r }(0, amdclean.core, amdclean.constants), amdclean.structure = function (t, e) { "use strict"; var o = amdclean["core"]; return o.prototype.exit = function () { throw "exit() not implemented, see remove()" }, o.prototype.noLoop = function () { this._loop = !1, this._drawInterval && clearInterval(this._drawInterval) }, o.prototype.loop = function () { this._loop = !0, this._draw() }, o.prototype.push = function () { this.drawingContext.save(), this._styles.push({ doStroke: this._doStroke, doFill: this._doFill, tint: this._tint, imageMode: this._imageMode, rectMode: this._rectMode, ellipseMode: this._ellipseMode, colorMode: this._colorMode, textFont: this.textFont, textLeading: this.textLeading, textSize: this.textSize, textStyle: this.textStyle }) }, o.prototype.pop = function () { this.drawingContext.restore(); var t = this._styles.pop(); this._doStroke = t.doStroke, this._doFill = t.doFill, this._tint = t.tint, this._imageMode = t.imageMode, this._rectMode = t.rectMode, this._ellipseMode = t.ellipseMode, this._colorMode = t.colorMode, this.textFont = t.textFont, this.textLeading = t.textLeading, this.textSize = t.textSize, this.textStyle = t.textStyle }, o.prototype.pushStyle = function () { throw new Error("pushStyle() not used, see push()") }, o.prototype.popStyle = function () { throw new Error("popStyle() not used, see pop()") }, o.prototype.redraw = function () { var t = this.setup || window.setup, e = this.draw || window.draw; "function" == typeof e && (this.push(), void 0 === t && this.scale(this._pixelDensity, this._pixelDensity), this._registeredMethods.pre.forEach(function (t) { t.call(this) }), e(), this._registeredMethods.post.forEach(function (t) { t.call(this) }), this.pop()) }, o.prototype.size = function () { throw "size() not implemented, see createCanvas()" }, o }(), amdclean.transform = function (t, e, o, r) { "use strict"; var n = e; o = o; return n.prototype.applyMatrix = function (t, e, o, r, n, i) { return this.drawingContext.transform(t, e, o, r, n, i), this }, n.prototype.popMatrix = function () { throw new Error("popMatrix() not used, see pop()") }, n.prototype.printMatrix = function () { throw new Error("printMatrix() not implemented") }, n.prototype.pushMatrix = function () { throw new Error("pushMatrix() not used, see push()") }, n.prototype.resetMatrix = function () { return this.drawingContext.setTransform(1, 0, 0, 1, 0, 0), this }, n.prototype.rotate = function (t) { return this._angleMode === o.DEGREES && (t = this.radians(t)), this.drawingContext.rotate(t), this }, n.prototype.rotateX = function () { throw "not yet implemented" }, n.prototype.rotateY = function () { throw "not yet implemented" }, n.prototype.scale = function () { var t = 1, e = 1; return 1 === arguments.length ? t = e = arguments[0] : (t = arguments[0], e = arguments[1]), this.drawingContext.scale(t, e), this }, n.prototype.shearX = function (t) { return this._angleMode === o.DEGREES && (t = this.radians(t)), this.drawingContext.transform(1, 0, this.tan(t), 1, 0, 0), this }, n.prototype.shearY = function (t) { return this._angleMode === o.DEGREES && (t = this.radians(t)), this.drawingContext.transform(1, this.tan(t), 0, 1, 0, 0), this }, n.prototype.translate = function (t, e) { return this.drawingContext.translate(t, e), this }, n }(0, amdclean.core, amdclean.constants, amdclean.outputtext_area), amdclean.typographyattributes = function (t, e, o) { "use strict"; var r = e; o = o; return r.prototype._textLeading = 15, r.prototype._textFont = "sans-serif", r.prototype._textSize = 12, r.prototype._textStyle = o.NORMAL, r.prototype._textAscent = null, r.prototype._textDescent = null, r.prototype.textAlign = function (t, e) { t !== o.LEFT && t !== o.RIGHT && t !== o.CENTER || (this.drawingContext.textAlign = t), e !== o.TOP && e !== o.BOTTOM && e !== o.CENTER && e !== o.BASELINE || (this.drawingContext.textBaseline = e) }, r.prototype.textLeading = function (t) { this._setProperty("_textLeading", t) }, r.prototype.textSize = function (t) { this._setProperty("_textSize", t), this._setProperty("_textLeading", 1.25 * t), this._applyTextProperties() }, r.prototype.textStyle = function (t) { t !== o.NORMAL && t !== o.ITALIC && t !== o.BOLD || (this._setProperty("_textStyle", t), this._applyTextProperties()) }, r.prototype.textWidth = function (t) { return this.drawingContext.measureText(t).width }, r.prototype.textAscent = function () { return null == this._textAscent && this._updateTextMetrics(), this._textAscent }, r.prototype.textDescent = function () { return null == this._textDescent && this._updateTextMetrics(), this._textDescent }, r.prototype._applyTextProperties = function () { this._setProperty("_textAscent", null), this._setProperty("_textDescent", null); var t = this._textStyle + " " + this._textSize + "px " + this._textFont; this.drawingContext.font = t }, r.prototype._updateTextMetrics = function () { var t = document.createElement("span"); t.style.fontFamily = this._textFont, t.style.fontSize = this._textSize + "px", t.innerHTML = "ABCjgq|"; var e = document.createElement("div"); e.style.display = "inline-block", e.style.width = "1px", e.style.height = "0px"; var o = document.createElement("div"); o.appendChild(t), o.appendChild(e), o.style.height = "0px", o.style.overflow = "hidden", document.body.appendChild(o), e.style.verticalAlign = "baseline"; var r = this._calculateOffset(e), n = this._calculateOffset(t), i = r[1] - n[1]; e.style.verticalAlign = "bottom", r = this._calculateOffset(e), n = this._calculateOffset(t); var s = r[1] - n[1] - i; document.body.removeChild(o), this._setProperty("_textAscent", i), this._setProperty("_textDescent", s) }, r.prototype._calculateOffset = function (t) { var e = 0, o = 0; if (t.offsetParent) do { e += t.offsetLeft, o += t.offsetTop } while (t = t.offsetParent); else e += t.offsetLeft, o += t.offsetTop; return [e, o] }, r }(0, amdclean.core, amdclean.constants), amdclean.typographyloading_displaying = function (t, e) { "use strict"; var o = amdclean["core"]; return o.prototype.text = function (t, e, o, r, n) { "string" != typeof t && (t = t.toString()), void 0 !== r && (n += o += this._textLeading); for (var i = (t = t.replace(/(\t)/g, "  ")).split("\n"), s = 0; s < i.length; s++) { for (var a = "", l = i[s].split(" "), p = 0; p < l.length; p++)if (o + this._textLeading <= n || void 0 === n) { var h = a + l[p] + " ", c = this.drawingContext.measureText(h).width; void 0 !== r && c > r ? (this._doFill && this.drawingContext.fillText(a, e, o), this._doStroke && this.drawingContext.strokeText(a, e, o), a = l[p] + " ", o += this._textLeading) : a = h } this._doFill && this.drawingContext.fillText(a, e, o), this._doStroke && this.drawingContext.strokeText(a, e, o), o += this._textLeading } }, o.prototype.textFont = function (t) { this._setProperty("_textFont", t), this._applyTextProperties() }, o }(), amdclean.src_app = function (t, e, o, r, n, i, s, a, l, p, h, c, u, d, f, y, m, g, w, v, _, x, b, C, T, R, S, E, M, P, A, I, k, D, F, O, N, L, G, q, z, j, H) { "use strict"; var B = e, V = function () { window.PHANTOMJS || window.mocha || (window.setup && "function" == typeof window.setup || window.draw && "function" == typeof window.draw) && new B }; return "complete" === document.readyState ? V() : window.addEventListener("load", V, !1), B }(0, amdclean.core, amdclean.p5Color, amdclean.p5Element, amdclean.p5Graphics, amdclean.p5Image, amdclean.p5File, amdclean.p5Vector, amdclean.p5TableRow, amdclean.p5Table, amdclean.colorcreating_reading, amdclean.colorsetting, amdclean.constants, amdclean.dataconversion, amdclean.dataarray_functions, amdclean.datastring_functions, amdclean.environment, amdclean.imageimage, amdclean.imageloading_displaying, amdclean.imagepixels, amdclean.inputfiles, amdclean.inputkeyboard, amdclean.inputacceleration, amdclean.inputmouse, amdclean.inputtime_date, amdclean.inputtouch, amdclean.mathmath, amdclean.mathcalculation, amdclean.mathrandom, amdclean.mathnoise, amdclean.mathtrigonometry, amdclean.outputfiles, amdclean.outputimage, amdclean.outputtext_area, amdclean.renderingrendering, amdclean.shape2d_primitives, amdclean.shapeattributes, amdclean.shapecurves, amdclean.shapevertex, amdclean.structure, amdclean.transform, amdclean.typographyattributes, amdclean.typographyloading_displaying), amdclean.src_app });